



<!doctype html>
<html lang="en-us">
  <head>

    <title>Debugging PHP in ISLE: a Kludge // The Grinnell College Digital Library Application Developer&#39;s Blog</title>
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.87.0" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Mark A. McFate" />
    <meta name="description" content="" />
    
    <link rel="stylesheet" href="https://digital-grinnell.github.io/dlad-blog/css/main.8a32dadea1834ef74fe59f5362dbaaa416e123d8600158d361ad3d96945c0aa5.css" />

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-4766052-14', 'auto');
	
	ga('send', 'pageview');
}
</script>
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Debugging PHP in ISLE: a Kludge"/>
<meta name="twitter:description" content="In an earlier post I chronicle the exhaustive steps taken to create a &ldquo;debuggable&rdquo; local/development instance of Digital.Grinnell that behaves exactly like the real thing, except with a much smaller, portable FEDORA repository under it. I&rsquo;m claiming success on that front, but there is one glaring kludge in the process that I have yet to work out.
The Kludge So, my debugging of an ISLE stack involves the coordinated configuration and engagement of XDebug inside the Apache container, and PHPStorm, along with persistence of the stack&rsquo;s PHP codebase&hellip; and therein lies the rub."/>

    <meta property="og:title" content="Debugging PHP in ISLE: a Kludge" />
<meta property="og:description" content="In an earlier post I chronicle the exhaustive steps taken to create a &ldquo;debuggable&rdquo; local/development instance of Digital.Grinnell that behaves exactly like the real thing, except with a much smaller, portable FEDORA repository under it. I&rsquo;m claiming success on that front, but there is one glaring kludge in the process that I have yet to work out.
The Kludge So, my debugging of an ISLE stack involves the coordinated configuration and engagement of XDebug inside the Apache container, and PHPStorm, along with persistence of the stack&rsquo;s PHP codebase&hellip; and therein lies the rub." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://digital-grinnell.github.io/dlad-blog/posts/025-kludge-debugging-isle/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2019-07-19T00:00:00+00:00" />
<meta property="article:modified_time" content="2019-07-19T22:10:12-05:00" />



  </head>

  <body>

    
    <header class="app-header">

      

      <a href="https://digital-grinnell.github.io/dlad-blog/"><img class="app-header-avatar" src="https://digital-grinnell.github.io/dlad-blog/avatar.jpg" alt="Mark A. McFate" /></a>
      <h2>The Grinnell College Digital Library Application Developer&#39;s Blog</h2>

      <div class="author-block">

        

        <p class="site-rev">
          Compiled: Oct 4, 2021 at 3:22pm CDT<br/>
          Content Updated: 2021-Sep-2 14:57 CDT
        </p>

        <div class="name">by
        <strong>Mark A. McFate</strong></div>
        <div class="address">Grinnell College Libraries</div>
        <div class="link"><a href="mailto:"></a></div>
        <br/>
      </div>

      <nav class="sidebar-nav">
        
        
        <a class="sidebar-nav-item" href="https://digital-grinnell.github.io/dlad-blog/search/" title="">Search This Blog</a>
        
        <a class="sidebar-nav-item" href="https://digital-grinnell.github.io/dlad-blog/about/" title="">About Me</a>
        
      </nav>

      <p class="site-description">Mark&#39;s first Hugo site, a blog, formerly at Static.Grinnell.edu now hosted on GitHub Pages.</p>
      <div class="app-header-social">
        
          <a target="_blank" href="https://github.com/McFateM"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-link">
  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg></a>
        
          <a target="_blank" href="https://twitter.com/gohugoio"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-link">
  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg></a>
        
      </div>
      <p class="copyright">The views and opinions expressed on this site belong solely to the original author(s) and do not necessarily represent or reflect those of Grinnell College.</p>
    </header>

    
    <main class="app-container">
      <div class="breadcrumbs">
  
  
  <a href="https://digital-grinnell.github.io/dlad-blog/">Home</a>
  
    
    
    
      &bullet; <a href='https://digital-grinnell.github.io/dlad-blog/posts/'>Posts</a>
      
    
  
    
    
    
      &bullet; <a href='https://digital-grinnell.github.io/dlad-blog/posts/025-kludge-debugging-isle/'>025 kludge debugging isle</a>
      
    
  
    
    
    
  
</div>

      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Debugging PHP in ISLE: a Kludge</h1>
      <div class="post-meta">

        
        

        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-link">
  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg>
          2 min read
          &nbsp;&nbsp;&bullet;&nbsp;&nbsp;
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-link">
  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg>
          Jul 19, 2019
          
            &nbsp;&nbsp;&bullet;&nbsp;&nbsp;Updated: Jul 19, 2019 - 22:10
          
          
            &nbsp;&nbsp;&bullet;&nbsp;&nbsp;<strong><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-link">
  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg> Mark A. McFate</strong>
          <div>
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-link">
  <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path>
  <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path>
</svg>
              <a class="tag" href="https://digital-grinnell.github.io/dlad-blog/tags/isle/">ISLE</a><a class="tag" href="https://digital-grinnell.github.io/dlad-blog/tags/xdebug/">XDebug</a><a class="tag" href="https://digital-grinnell.github.io/dlad-blog/tags/phpstorm/">PHPStorm</a></div></div>
    </header>
    <div class="post-content">
      <p>In an earlier <a href="https://static.grinnell.edu/blogs/McFateM/posts/021-rebuilding-isle-ld/">post</a> I chronicle the exhaustive steps taken to create a &ldquo;debuggable&rdquo; local/development instance of Digital.Grinnell that behaves exactly like the <a href="https://digital.grinnell.edu">real thing</a>, except with a much smaller, portable <em>FEDORA</em> repository under it.  I&rsquo;m claiming success on that front, but there is one glaring kludge in the process that I have yet to work out.</p>
<h3 id="the-kludge">The Kludge</h3>
<p>So, my debugging of an <em>ISLE</em> stack involves the coordinated configuration and engagement of <a href="https://xdebug.org/">XDebug</a> inside the <em>Apache</em> container, and <a href="https://www.jetbrains.com/phpstorm/">PHPStorm</a>, along with persistence of the stack&rsquo;s PHP codebase&hellip; and therein lies the rub.</p>
<p>The purpose of my local instance was to verify that all of the latest stack improvements work properly in the <em>Digital.Grinnell</em> environment, so naturally I built a stack using all of the latest code; not at all difficult in <em>ISLE</em>. However, since the codebase is assembled, it can&rsquo;t easily be mapped or mounted for persistence, at least not initially since mounting it from the host suggests that it must exist BEFORE the stack is assembled. Just to be clear, a persistent mount of the code is <strong>critical</strong> for <em>PHPStorm</em>, since the code on the host is used to edit, set breakpoints, and a slew of other typical &ldquo;debug&rdquo; activities.</p>
<p>For reference, the code I&rsquo;m interested in debugging lies in the <em>Apache</em> container on the <code>/var/www/html/sites/all/modules</code> path.  The &ldquo;override&rdquo; technique I&rsquo;m using here is essentially what&rsquo;s suggested/documented in <a href="https://docs.docker.com/compose/extends/">https://docs.docker.com/compose/extends/</a>.</p>
<p>My approach to this so far is to:</p>
<ol>
<li>Build and launch the stack without mapping anything to <code>/var/www/html/...</code>.  This allows <em>ISLE</em> to assemble the latest copy of each component.</li>
<li>After verifying that the stack works, use <code>docker cp</code> on the host to copy the new code from the <em>Apache</em> container back to the host, like so:</li>
</ol>
<pre><code>- `cd ~/Projects/ISLE; docker cp isle-apache-ld:/var/www/html ./persistent/html`
</code></pre>
<ol start="3">
<li>Now, alter the <code>docker-compose.override.yml</code> file to include all of the necessary debug configuration bits (see <a href="https://static.grinnell.edu/blogs/McFateM/posts/023-debugging-isle-ld-in-phpstorm/">this post</a> for additional details).</li>
<li>Build and launch <em>ISLE</em> again using <code>docker-compose up -d</code>, just like before.  The difference is that with <code>./persistent/html</code> now mapped into the container, <em>PHPStorm</em> debugging will work as it should.</li>
</ol>
<p>In my opinion, <code>Step 2  +  Step 3  =  kludge</code>.  The question is&hellip;</p>
<p><strong>How can I get around this and still build a pristine <em>ISLE</em> for both evaluation AND debugging?</strong></p>
<p>And that&rsquo;s a wrap.  Until next time&hellip;</p>

    </div>
    <div class="post-footer">
      <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "digital-library-applications-developer-blog" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
  </article>

    </main>

    

  </body>

</html>
