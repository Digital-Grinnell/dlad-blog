<!doctype html><html lang=en-us><head><title>Digital.Grinnell Custom MODS Display // The Grinnell College Digital Library Application Developer's Blog</title><meta charset=utf-8><meta name=generator content="Hugo 0.110.0"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Mark A. McFate"><meta name=description content><link rel=stylesheet href=https://static.grinnell.edu/dlad-blog/css/main.min.bc1abb622a656fb4c816fed09d36c15e272b31b7beae2e7113b2f9418bff0361.css><script type=text/javascript src=https://static.grinnell.edu/dlad-blog/js/pdf-js/build/pdf.js></script><meta name=twitter:card content="summary"><meta name=twitter:title content="Digital.Grinnell Custom MODS Display"><meta name=twitter:description content="Digital.Grinnell has seen a lot of customization over the years, and quite a bit of it relates to how an object&rsquo;s metadata, especially its MODS metadata, is displayed. My aim for the past couple of years has been to remove as much customization as possible, but I&rsquo;ve found it difficult to remove features of our MODS display because those features seem to be rather popular. This is particulary true of our compound object display.
Custom Compound/Child MODS Display At present, May 28, 2020, the MODS display for a typical compound/child object in Digital."><meta property="og:title" content="Digital.Grinnell Custom MODS Display"><meta property="og:description" content="Digital.Grinnell has seen a lot of customization over the years, and quite a bit of it relates to how an object&rsquo;s metadata, especially its MODS metadata, is displayed. My aim for the past couple of years has been to remove as much customization as possible, but I&rsquo;ve found it difficult to remove features of our MODS display because those features seem to be rather popular. This is particulary true of our compound object display.
Custom Compound/Child MODS Display At present, May 28, 2020, the MODS display for a typical compound/child object in Digital."><meta property="og:type" content="article"><meta property="og:url" content="https://static.grinnell.edu/dlad-blog/posts/076-digital.grinnell-custom-mods-display/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-05-28T00:00:00+00:00"><meta property="article:modified_time" content="2020-05-28T00:00:00+00:00"></head><body><header class=app-header><a href=https://static.grinnell.edu/dlad-blog/><img class=app-header-avatar src=https://static.grinnell.edu/dlad-blog/avatar.jpg alt="Mark A. McFate"></a><h2>The Grinnell College Digital Library Application Developer's Blog</h2><div class=author-block><p class=site-rev>Compiled: Feb 7, 2023 at 3:57pm CST<br>Content Updated: 2023-Feb-6 18:19 CST</p><div class=name>by
<strong>Mark A. McFate</strong></div><div class=address>Grinnell College Libraries</div><div class=link><a href=mailto:></a></div><br></div><nav class=sidebar-nav><a class=sidebar-nav-item href=https://static.grinnell.edu/dlad-blog/search/ title>Search This Blog</a>
<a class=sidebar-nav-item href=https://static.grinnell.edu/dlad-blog/about/ title>About Me</a></nav><p class=site-description>Mark&rsquo;s first Hugo site, a blog, formerly on prem at Static.Grinnell.edu, moved to <em>DigitalOcean</em>, then to <em>Azure</em>, and now hosted on <em>GitHub Pages</em>.</p><div class=app-header-social><a target=_blank href=https://github.com/McFateM><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><title>github</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a target=_blank href=https://twitter.com/gohugoio><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter"><title>twitter</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a></div><p class=copyright>The views and opinions expressed on this site belong solely to the original author(s) and do not necessarily represent or reflect those of Grinnell College.</p></header><main class=app-container><div class=breadcrumbs><a href=https://static.grinnell.edu/dlad-blog/>Home</a>
&bull; <a href=https://static.grinnell.edu/dlad-blog/posts/>Posts</a>
&bull; <a href=https://static.grinnell.edu/dlad-blog/posts/076-digital.grinnell-custom-mods-display/>076 digital.grinnell custom mods display</a></div><article class=post><header class=post-header><h1 class=post-title>Digital.Grinnell Custom MODS Display</h1><div class=post-meta><script>console.log("Hugo Debug: ",JSON.parse('"2020-05-29T00:00:00Z"'))</script><script>console.log("Hugo Debug: ",JSON.parse('"2020-05-28T00:00:00Z"'))</script><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>2 min read
&nbsp;&nbsp;&bull;&nbsp;&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
May 28, 2020
&nbsp;&nbsp;&bull;&nbsp;&nbsp;<strong><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-at-sign"><title>at-sign</title><circle cx="12" cy="12" r="4"/><path d="M16 8v5a3 3 0 006 0v-1a10 10 0 10-3.92 7.94"/></svg> Mark A. McFate</strong><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/digital.grinnell/>Digital.Grinnell</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/mods/>MODS</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/metadata/>metadata</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/custom/>custom</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/display/>display</a></div></div></header><div class=post-content><p><a href=https://digital.grinnell.edu>Digital.Grinnell</a> has seen a lot of customization over the years, and quite a bit of it relates to how an object&rsquo;s metadata, especially its <a href=http://www.loc.gov/standards/mods/>MODS</a> metadata, is displayed. My aim for the past couple of years has been to remove as much customization as possible, but I&rsquo;ve found it difficult to remove features of our MODS display because those features seem to be rather popular. This is particulary true of our compound object display.</p><h2 id=custom-compoundchild-mods-display>Custom Compound/Child MODS Display</h2><p>At present, May 28, 2020, the MODS display for a typical compound/child object in Digital.Grinnell looks something like the example image from <a href=https://digital.grinnell.edu/islandora/object/grinnell:10365>grinnell:10365</a> included here:</p><p><img src=https://static.grinnell.edu/dlad-blog/images/post-076/grinnell-10365-mods.png alt="grinnell:10365 MODS Example" title="Sample MODS Display"></p><p>The display feature demonstrated above is supposed to &ldquo;hide&rdquo; any field in the child object, the first 8 lines of metadata that appear above the &ldquo;Group Record&rdquo;, which are <strong>identical</strong> to the same field in the parent/compound object, the lines below the &ldquo;Group Record&rdquo; heading. This rule applies to all fields <strong>except</strong> &ldquo;Title&rdquo; and &ldquo;Supporting Hoste&rdquo;, but if you look closely at the image above you&rsquo;ll see there are some duplicates displayed, specifically:</p><ul><li>Related Item: Digital Grinnell</li><li>Language: English</li><li>Access Condition: Copyright to this work&mldr;</li></ul><h3 id=details>Details</h3><p>The process of hiding &ldquo;duplicate&rdquo; metadata from a child/parent object pair is relatively simple, but it involves some <a href=https://en.wikipedia.org/wiki/XSLT>XSL transformations (XSLT)</a>, so it&rsquo;s inherently messy. The heavy-lifting all takes place in Digital.Grinnell&rsquo;s <a href=https://github.com/DigitalGrinnell/islandora_mods_display>islandora_mods_display</a> module.</p><h4 id=xsl-transform>XSL Transform</h4><p>The aforementioned transform happens in a &ldquo;hook&rdquo; function called <em>islandora_mods_display_preprocess_islandora_mods_display_display</em> that can be found in <a href=https://github.com/DigitalGrinnell/islandora_mods_display/blob/master/theme/theme.inc>theme.inc</a>. The .xsl file used in the transform is <a href=https://github.com/DigitalGrinnell/islandora_mods_display/blob/master/xsl/mods_display.xsl>mods_display.xsl</a>. The &ldquo;merging&rdquo; of child/parent metadata happens inside the aforementioned function.</p><h4 id=hidden-elements>Hidden Elements</h4><p>Another function, <em>islandora_mods_display_remove_redundant_rows</em>, from <em>theme.inc</em> hides redundant rows by applying a CSS class named <code>hidden</code> to the <code>&lt;tr></code> elements of the child object MODS that have identical counterparts in the parent&rsquo;s MODS metadata.</p><h2 id=fixing-the-displayed-duplicates>Fixing the Displayed Duplicates</h2><p>Found it, and fixed it too! The <em>islandora_mods_display_remove_redundant_rows</em> code in <em>theme.inc</em> added the <code>hidden</code> class to <code>&lt;tr></code> elements like so:</p><pre tabindex=0><code>$elements[$i] = str_replace(&#39;&lt;tr&gt;&#39;, &#39;&lt;tr class=&#34;hidden&#34;&gt;&#39;, $elements[$i]);
</code></pre><p>The problem with that statement is that <strong>some table rows now have <code>xmlns:xlink</code> attributes</strong> due to the recent addition of live links in some metadata fields. As a result, those fields that now support live links could not be &ldquo;hidden&rdquo;. The same code now reads like so:</p><pre tabindex=0><code>$elements[$i] = str_replace(&#39;&lt;tr&#39;, &#39;&lt;tr class=&#34;hidden&#34;&#39;, $elements[$i]);
</code></pre><p>Note that the closing carret has been removed from both the search string and the replacement. It works! Yay❗ As a result, the same object metadata shown above now looks like this:</p><p><img src=https://static.grinnell.edu/dlad-blog/images/post-076/grinnell-10365-new-mods.png alt="grinnell:10365 MODS Example - Corrected" title="Corrected MODS Display"></p><p>And that&rsquo;s a wrap. Until next time, stay safe and wash your hands! 😄</p></div><div class=post-footer><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//digital-library-applications-developer-blog.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></article></main></body></html>