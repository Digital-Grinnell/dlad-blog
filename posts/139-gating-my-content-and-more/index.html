<!doctype html><html lang=en-us><head><title>Gating My Content & More - Parts 1 and 2 // The Grinnell College Digital Library Application Developer's Blog</title><meta charset=utf-8><meta name=generator content="Hugo 0.110.0"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Mark A. McFate"><meta name=description content="My second attempt at gating content in Wieting.TamaToledo.com, sort of."><link rel=stylesheet href=https://static.grinnell.edu/dlad-blog/css/main.min.bc1abb622a656fb4c816fed09d36c15e272b31b7beae2e7113b2f9418bff0361.css><script type=text/javascript src=https://static.grinnell.edu/dlad-blog/js/pdf-js/build/pdf.js></script><meta name=twitter:card content="summary"><meta name=twitter:title content="Gating My Content & More - Parts 1 and 2"><meta name=twitter:description content="My second attempt at gating content in Wieting.TamaToledo.com, sort of."><meta property="og:title" content="Gating My Content & More - Parts 1 and 2"><meta property="og:description" content="My second attempt at gating content in Wieting.TamaToledo.com, sort of."><meta property="og:type" content="article"><meta property="og:url" content="https://static.grinnell.edu/dlad-blog/posts/139-gating-my-content-and-more/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-02-06T18:19:53-06:00"><meta property="article:modified_time" content="2023-02-06T18:19:53-06:00"></head><body><header class=app-header><a href=https://static.grinnell.edu/dlad-blog/><img class=app-header-avatar src=https://static.grinnell.edu/dlad-blog/avatar.jpg alt="Mark A. McFate"></a><h2>The Grinnell College Digital Library Application Developer's Blog</h2><div class=author-block><p class=site-rev>Compiled: Feb 7, 2023 at 3:57pm CST<br>Content Updated: 2023-Feb-6 18:19 CST</p><div class=name>by
<strong>Mark A. McFate</strong></div><div class=address>Grinnell College Libraries</div><div class=link><a href=mailto:></a></div><br></div><nav class=sidebar-nav><a class=sidebar-nav-item href=https://static.grinnell.edu/dlad-blog/search/ title>Search This Blog</a>
<a class=sidebar-nav-item href=https://static.grinnell.edu/dlad-blog/about/ title>About Me</a></nav><p class=site-description>Mark&rsquo;s first Hugo site, a blog, formerly on prem at Static.Grinnell.edu, moved to <em>DigitalOcean</em>, then to <em>Azure</em>, and now hosted on <em>GitHub Pages</em>.</p><div class=app-header-social><a target=_blank href=https://github.com/McFateM><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><title>github</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a target=_blank href=https://twitter.com/gohugoio><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter"><title>twitter</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a></div><p class=copyright>The views and opinions expressed on this site belong solely to the original author(s) and do not necessarily represent or reflect those of Grinnell College.</p></header><main class=app-container><div class=breadcrumbs><a href=https://static.grinnell.edu/dlad-blog/>Home</a>
&bull; <a href=https://static.grinnell.edu/dlad-blog/posts/>Posts</a>
&bull; <a href=https://static.grinnell.edu/dlad-blog/posts/139-gating-my-content-and-more/>139 gating my content and more</a></div><article class=post><header class=post-header><h1 class=post-title>Gating My Content & More - Parts 1 and 2</h1><div class=post-meta><script>console.log("Hugo Debug: ",JSON.parse('"2023-02-07T18:19:53-06:00"'))</script><script>console.log("Hugo Debug: ",JSON.parse('"2023-02-06T18:19:53-06:00"'))</script><script>console.log("Hugo Debug: ",JSON.parse('"2023-02-07T15:56:40Z"'))</script><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>9 min read
&nbsp;&nbsp;&bull;&nbsp;&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
Feb 6, 2023
&nbsp;&nbsp;&bull;&nbsp;&nbsp;<strong><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-at-sign"><title>at-sign</title><circle cx="12" cy="12" r="4"/><path d="M16 8v5a3 3 0 006 0v-1a10 10 0 10-3.92 7.94"/></svg> Mark A. McFate</strong><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/gating/>gating</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/authentication/>authentication</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/netlifycms/>NetlifyCMS</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/wieting/>Wieting</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/staticrypt/>StatiCrypt</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/eleventy/>Eleventy</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/11ty/>11ty</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/azure/>Azure</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/github/>GitHub</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/oauth/>oAuth</a></div></div></header><div class=post-content><h1 id=a-blended-approach>A Blended Approach</h1><p>It&rsquo;s a new month, February 2023 that is, and this the first part of follow-up to last month&rsquo;s post in my personal blog, namely <a href=https://blog.summittdweller.com/posts/2023/01/gating-content/>Gating My Content</a>. Now, rather than trying to &ldquo;gate&rdquo; some of the content in the <a href=https://wieting.tamatoledo.com>Wieting Theatre website</a>, I&rsquo;m going to start a new site, with characteristics listed below, and include only the protected portion of the Wieting&rsquo;s content.</p><p>I call this a &ldquo;blended&rdquo; approach because it will, at least initially, leverage and blend guidance and elements from many of the resources I&rsquo;ve captured at <a href=https://www.one-tab.com/page/uZbS4FxhQeCpAdmpNjnHAw>https://www.one-tab.com/page/uZbS4FxhQeCpAdmpNjnHAw</a>.</p><div class=original><p>This post originally documented the creation of an <em>11ty</em> site based on the <a href=https://github.com/surjithctly/neat-starter>NEAT Starter Template</a>, and most of the illustrations here include references to it. However, after the <em>11ty</em> site was created I found a starter tutorial and site template better suited to my needs. So, I have a <a href=https://www.one-tab.com/page/6DzScWRTSkaO5xr7YGC2Hg>new OneTab page</a> which includes <a href=https://www.smashingmagazine.com/2021/03/eleventy-static-site-generator/>A Deep Dive Into Eleventy Static Site Generator</a> with an associated starter/template that I&rsquo;ll be using in place of the <a href=https://github.com/surjithctly/neat-starter>NEAT Starter Template</a>.</p></div><h2 id=features>Features</h2><p>As you&rsquo;ll see in the <a href=https://www.one-tab.com/>OneTab</a> page listed above, the new site will feature:</p><ol><li>An <a href=https://www.11ty.dev/>11ty</a> site following ~this <a href=https://github.com/surjithctly/neat-starter>NEAT Starter Template</a>~ <a href=https://www.smashingmagazine.com/2021/03/eleventy-static-site-generator/>A Deep Dive Into Eleventy Static Site Generator</a>,</li><li>Deployed as an <a href=https://azure.microsoft.com/en-us/products/app-service/static>Azure Static Web App</a>,</li><li>Using <a href=https://robinmoisson.github.io/staticrypt/>StatiCrypt CLI</a> to protect pages,</li><li>From a <a href=https://github.com/Jack-alope/staticrypt-github-actions/blob/main/.github/workflows/encrypt.yml>GitHub Action</a>, and</li><li>Perhaps some integration with <a href=https://github.com/jahlen/hugo-azure-static-webapp>Netlify CMS in <em>Azure</em></a> instead of <em>Netlify.com</em>.</li></ol><h1 id=with-better-documentation>With Better Documentation</h1><p>As steps are taken, I&rsquo;ll try to capture what I used, and why, along with a detailed history of those steps. In fact, I&rsquo;m going to try using <a href=https://static.grinnell.edu/dlad-blog/posts/138-creating-better-documentation/>Creating-Better-Documentation</a> to record everything I do on this screen from start-to-finish. Wish me luck.</p><div class=original><p>This post will cover features 1 and 2 from the list above. Subsequent posts in this blog will address features 3 through 5.</p></div><h1 id=building-a-local-11ty-site>Building a Local 11ty Site</h1><p>I started the build process using the <a href=https://github.com/surjithctly/neat-starter>NEAT Starter Template</a> to create a new local <code>git</code> project. See <em>Figure 1</em> below.</p><link rel=stylesheet href=https://static.grinnell.edu/dlad-blog/css/hugo-easy-gallery.css><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/0580.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/0580.png itemprop=contentUrl></a><figcaption><h4>Figure 1 &#183; Create a Local Clone of the NEAT Template</h4></figcaption></figure></div><p>In my case, I choose to name my new project <code>wieting-protected-content</code> rather than using the default name of <code>neat-starter</code>. The root of the command is: <code>git clone https://github.com/surjithctly/neat-starter</code>.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/0680.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/0680.png itemprop=contentUrl></a><figcaption><h4>Figure 2 &#183; Give the Local Clone An Appropriate Name</h4></figcaption></figure></div><p>Change directory (<code>cd</code>) into the new project directory.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/0700.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/0700.png itemprop=contentUrl></a><figcaption><h4>Figure 3 &#183; Change Directory Into the New Project</h4></figcaption></figure></div><p>The <code>NEAT Starter</code> project still uses the old <code>master</code> branch name, change that branch name to <code>main</code> like so: <code>git branch -m master main</code>.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/0810.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/0810.png itemprop=contentUrl></a><figcaption><h4>Figure 4 &#183; Change the Default Branch from Master to Main</h4></figcaption></figure></div><p>Time to launch <em>VScode</em>. On my Mac that&rsquo;s simply: <code>code .</code>.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/0842.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/0842.png itemprop=contentUrl></a><figcaption><h4>Figure 5 &#183; Launch <em>VSCode</em></h4></figcaption></figure></div><p>I like to have a terminal, attached to my project workspace, running inside <em>VSCode</em>. So, in <em>VSCode</em> that&rsquo;s <code>Command - Shift - P</code> to open the command pallette, then select <code>Terminal: Create New Terminal (In Active Workspace)</code> as you see below.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/0870.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/0870.png itemprop=contentUrl></a><figcaption><h4>Figure 6 &#183; Open a Terminal in <em>VSCode</em></h4></figcaption></figure></div><p>Inside the <em>VSCode</em> terminal execute the project setup instructions included in the <a href=https://github.com/surjithctly/neat-starter>surjithctly/neat-starter</a> <code>README.md</code> file. Begin with <code>npm install</code>.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/1030.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/1030.png itemprop=contentUrl></a><figcaption><h4>Figure 7 &#183; Install Dependencies with <code>npm</code></h4></figcaption></figure></div><p>Next, execute <code>npm run build</code> as directed.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/1100.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/1100.png itemprop=contentUrl></a><figcaption><h4>Figure 8 &#183; Build the Project</h4></figcaption></figure></div><p>Finally, execute <code>npm run start</code>.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/1115.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/1115.png itemprop=contentUrl></a><figcaption><h4>Figure 9 &#183; Launch a Local 11ty Instance</h4></figcaption></figure></div><p>The <code>npm run start</code> command will launch a local webserver to compile and display your site. The output from the command will display a couple of addresses to the local site, probably <code>http://localhost:3001</code> and <code>http://localhost:8080</code>.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/1155.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/1155.png itemprop=contentUrl></a><figcaption><h4>Figure 10 &#183; Find the Local Site Address</h4></figcaption></figure></div><p>The first of the two addresses points to an instance of <code>Browsersync</code> where you can find information about the local webserver, including the actual address of the local <code>NEAT Starter</code>.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/1258.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/1258.png itemprop=contentUrl></a><figcaption><h4>Figure 11 &#183; Visit the Local Site Using Browsersync</h4></figcaption></figure></div><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/1280.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/1280.png itemprop=contentUrl></a><figcaption><h4>Figure 12 &#183; Open the NEAT Starter Site</h4></figcaption></figure></div><p>Examine the local <code>NEAT Starter</code> site, shown in <em>Figure 12</em> above, to verify that it&rsquo;s working, and to get familiar with its components.</p><h1 id=save-the-project-in-a-new-github-repo>Save the Project in a New GitHub Repo</h1><p>Having tested/verified the local site, it&rsquo;s now time to save your local work in a remote repository. I choose <em>GitHub</em> and my <em>SummittDweller</em> account to store my project, and followed the instructions for a &ldquo;new&rdquo; project &ndash; under the <code>+</code> drop-down and <code>New repository</code> selection) &ndash; at <a href=https://github.com/SummittDweller>https://github.com/SummittDweller</a>.</p><p>At [https://github.com/new][https://github.com/new] I entered the annotated parameters you see in <em>Figure 13</em> below, before clicking the <code>Create repository</code> button.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/1730.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/1730.png itemprop=contentUrl></a><figcaption><h4>Figure 13 &#183; Create a New Repo and Configure It</h4></figcaption></figure></div><p>After the new <em>GitHub</em> repo is created I returned to the terminal in <em>VSCode</em> and deleted the local <code>.git</code> directory there using: <code>rm -fr .git</code>. This step disengages my local project from the old remote it was cloned from.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/1810.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/1810.png itemprop=contentUrl></a><figcaption><h4>Figure 14 &#183; Remove the Local Repo&rsquo;s <code>.git</code> Directory</h4></figcaption></figure></div><p>Now, following the instructions that <em>GitHub</em> provides after creation of a new repository, I reinitialized my local project using <code>git init</code>.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/1837.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/1837.png itemprop=contentUrl></a><figcaption><h4>Figure 15 &#183; Reinitialize the Local Repo</h4></figcaption></figure></div><p>Since my local project already has a <code>README.md</code> file, and much more, I chose to stage ALL of the files within to be committed: <code>git add .</code>. This command takes the place of the <code>git add README.md</code> command that&rsquo;s suggested in the instructions from <em>GitHub</em>.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/1882.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/1882.png itemprop=contentUrl></a><figcaption><h4>Figure 16 &#183; Stage All Files to be Committed</h4></figcaption></figure></div><p>Now, following the remaining instructions from <em>GitHub</em> we will <code>git commit -m "first commit"</code> to commit everthing that is staged. Then&mldr;</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/1885.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/1885.png itemprop=contentUrl></a><figcaption><h4>Figure 17 &#183; Commit the Repo</h4></figcaption></figure></div><p>&mldr;we set the remote branch name to <code>main</code>, add the <em>GitHub</em> remote <code>origin</code> to the project, and <code>push</code> the commit, like so:</p><pre tabindex=0><code>git branch -M main
git remote add origin https://github.com/SummittDweller/wieting-protected-content
git push -u origin main
</code></pre><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/1935.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/1935.png itemprop=contentUrl></a><figcaption><h4>Figure 18 &#183; Set a New GitHub Remote and Push</h4></figcaption></figure></div><h1 id=engaging-as-an-azure-static-web-app>Engaging as an Azure Static Web App</h1><p>Now it&rsquo;s finally time to create a new <em>Azure Static Web App</em> from our project. I followed the guidance provided in <a href=https://squalr.us/2021/05/deploying-an-11ty-site-to-azure-static-web-apps/>Deploying an 11ty Site to Azure Static Web Apps</a> to do just that. Thank you <a href=https://squalr.us/>squalrus</a> for the excellent instruction!</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/2028.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/2028.png itemprop=contentUrl></a><figcaption><h4>Figure 19 &#183; Deploying an 11ty Site to Azure Static Web Apps</h4></figcaption></figure></div><p>I opened my <em>Azure</em> portal at <a href=https://portal.azure.com/#home>https://portal.azure.com/#home</a> and selected the controls you see in <em>Figure 20</em> to create a new <em>Static Web App</em>.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/2180.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/2180.png itemprop=contentUrl></a><figcaption><h4>Figure 20 &#183; Creating a New Azure Static Web App</h4></figcaption></figure></div><p>I choose to create a new &ldquo;Free&rdquo; app in my account and an existing <em>Resource group</em> housed in the <em>Central US</em> region.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/2250.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/2250.png itemprop=contentUrl></a><figcaption><h4>Figure 21 &#183; My Selections for the New App</h4></figcaption></figure></div><p>In the next three figures I instructed <em>Azure</em> to deploy my new app from the <em>GitHub</em> repo we created in the previous section of this document.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/2350.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/2350.png itemprop=contentUrl></a><figcaption><h4>Figure 22 &#183; Deploying from My New GitHub Repo</h4></figcaption></figure></div><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/2376.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/2376.png itemprop=contentUrl></a><figcaption><h4>Figure 23 &#183; Deploying the <code>main</code> Branch</h4></figcaption></figure></div><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/2594.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/2594.png itemprop=contentUrl></a><figcaption><h4>Figure 24 &#183; Critical Selections as Directed By <code>squalrus</code></h4></figcaption></figure></div><p>Clicking <code>Create</code> as shown below in <em>Figure 25</em> produces a new status screen. Check that the new app is being created, and deployed, using the correct parameters as seen in <em>Figure 26</em> below.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/2762.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/2762.png itemprop=contentUrl></a><figcaption><h4>Figure 25 &#183; Check the Deployment Parameters</h4></figcaption></figure></div><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/2770.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/2770.png itemprop=contentUrl></a><figcaption><h4>Figure 26 &#183; Validating and Deploying the App</h4></figcaption></figure></div><p>As the deployment proceeds you should see the <code>Deployment is in progress</code> screen as shown in <em>Figure 27</em> below. Buttons are provided on the right to <code>Go to resource</code> and <code>Pin to dashboard</code>. I recommend you at least pin the app to your <em>Azure</em> dashboard now.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/2788.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/2788.png itemprop=contentUrl></a><figcaption><h4>Figure 27 &#183; Deployment is in progress</h4></figcaption></figure></div><p>Once the deployment is complete you have additional opportunities to open the resource or pin the app to a dashboard.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/2800.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/2800.png itemprop=contentUrl></a><figcaption><h4>Figure 28 &#183; Your deployment is complete</h4></figcaption></figure></div><p>Opening the resource takes you to an app status screen like the one in <em>Figure 29</em> below. Click the <code>Browse</code> button to open the live app.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/2880.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/2880.png itemprop=contentUrl></a><figcaption><h4>Figure 29 &#183; App (resource) status</h4></figcaption></figure></div><p>The live app will appear in your browser with the canonical address of the new app shown as you see in <em>Figure 30</em> below. Note that in my case the app is &ldquo;deployed&rdquo; but still waiting on content, so the &ldquo;NEAT Starter&rdquo; site does not appear. In order to force a new deployment, with &ldquo;NEAT&rdquo; content, I needed to push content changes to <em>GitHub</em>.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/2900.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/2900.png itemprop=contentUrl></a><figcaption><h4>Figure 30 &#183; Your Azure Static Web App is live&mldr;</h4></figcaption></figure></div><p>Time to make some content changes and push them to <em>GitHub</em> to trigger a new build.</p><h1 id=push-changes-to-trigger-a-new-_azure_-build>Push Changes to Trigger a New <em>Azure</em> Build</h1><p><strong>Important!</strong> Before we work in our local project repo we need to <code>git pull</code> any/all changes. So, returing to <em>VSCode</em> and our project terminal do <code>git pull</code>. Notice that we pulled in at least one change. The file named in <em>Figure 31</em> below is part of the project&rsquo;s <code>.github/workflows</code> directory; it&rsquo;s the <em>GitHub Action</em> YAML file that <em>Azure</em> created to control our build and deployment!</p><p><strong>This <em>GitHub Action</em> is what makes this process work! Don&rsquo;t leave home without it!</strong></p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/3045.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/3045.png itemprop=contentUrl></a><figcaption><h4>Figure 31 &#183; Important: <code>git pull</code> to grab our GitHub Action!</h4></figcaption></figure></div><p>After the <code>git pull</code> let&rsquo;s find a bit of content to change for testing purposes. In my case I choose to change the <code>author:</code> name and <code>date:</code> in the front matter of one post.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/3410.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/3410.png itemprop=contentUrl></a><figcaption><h4>Figure 32 &#183; Changing Some Front Matter</h4></figcaption></figure></div><p>With the changes saved we need to <code>git add</code>, <code>git commit...</code>, then <code>git push</code> our changes up to the <em>GitHub</em> remote. The <code>push</code> will trigger a new remote build of our app.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/3515.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/3515.png itemprop=contentUrl></a><figcaption><h4>Figure 33 &#183; <code>git add</code>, <code>git commit...</code> and <code>git push</code></h4></figcaption></figure></div><p>To check on the build revist the <em>GitHub</em> project and the <code>/actions</code> page. In my case that&rsquo;s <a href=https://github.com/SummittDweller/wieting-protected-content/actions>https://github.com/SummittDweller/wieting-protected-content/actions</a>. There you should see at least one &ldquo;workflow run&rdquo; with a spinning yellow &ldquo;dot&rdquo; on the left. After some minutes the dot should stop spinning and turn green with a checkmark inside, that signals that your build is complete. If the dot turns red then the build failed and you&rsquo;re provided with links to log files that can help you identify the problem.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/3540.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/3540.png itemprop=contentUrl></a><figcaption><h4>Figure 34 &#183; Watch GitHub in action</h4></figcaption></figure></div><p>If the aforementioned build was successfull, you can return to your <em>Azure</em> portal, find the new app pinned there, click on it and use the <code>Browse</code> button you see in <em>Figure 35</em> to open the deployed app in your web browser.</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/3790.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/3790.png itemprop=contentUrl></a><figcaption><h4>Figure 35 &#183; Browse to open the new app</h4></figcaption></figure></div><p>I wanted to verify that my changes were indeed included in my app, so I navigated to the <code>Blog</code> link where the post at the top of the page reflects my <code>author:</code> and <code>date:</code> changes. 🎉</p><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/3825.png></div><a href=https://sddocs.blob.core.windows.net/documentation/Creating-Azure-Static-Web-App/3825.png itemprop=contentUrl></a><figcaption><h4>Figure 36 &#183; Success!</h4></figcaption></figure></div><hr><p>I hope you find portions of this very detailed post to be useful. I&rsquo;m sure there will soon be some follow-up to this, but for this installment&mldr; That&rsquo;s a wrap!</p></div><div class=post-footer><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//digital-library-applications-developer-blog.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></article></main></body></html>