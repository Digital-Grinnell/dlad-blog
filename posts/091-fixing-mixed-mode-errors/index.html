<!doctype html><html lang=en-us>
<head>
<title>Fixing 'Mixed Content' Errors // The Grinnell College Digital Library Application Developer's Blog</title>
<meta charset=utf-8>
<meta name=generator content="Hugo 0.88.1">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=author content="Mark A. McFate">
<meta name=description content>
<link rel=stylesheet href=https://static.grinnell.edu/dlad-blog/css/main.8a32dadea1834ef74fe59f5362dbaaa416e123d8600158d361ad3d96945c0aa5.css>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Fixing 'Mixed Content' Errors">
<meta name=twitter:description content="Last evening, just before the World Champion Kansas City Chiefs kicked off the NFL&rsquo;s 2020-21 season (I hope the season is healthy all the way into 2021), I attempted to update all the Drupal contrib modules, and core, in my new local instance of ISLE as chronicled in the Next Steps chapter of ISLE Local Migration Customization. Ultimately that update process left me with a host of incorrect owner/group/permissions issues in the Drupal code, and I was able to remedy those in short order.">
<meta property="og:title" content="Fixing 'Mixed Content' Errors">
<meta property="og:description" content="Last evening, just before the World Champion Kansas City Chiefs kicked off the NFL&rsquo;s 2020-21 season (I hope the season is healthy all the way into 2021), I attempted to update all the Drupal contrib modules, and core, in my new local instance of ISLE as chronicled in the Next Steps chapter of ISLE Local Migration Customization. Ultimately that update process left me with a host of incorrect owner/group/permissions issues in the Drupal code, and I was able to remedy those in short order.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://static.grinnell.edu/dlad-blog/posts/091-fixing-mixed-mode-errors/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2020-09-11T00:00:00+00:00">
<meta property="article:modified_time" content="2020-10-05T09:22:52-05:00">
</head>
<body>
<header class=app-header>
<a href=https://static.grinnell.edu/dlad-blog/><img class=app-header-avatar src=https://static.grinnell.edu/dlad-blog/avatar.jpg alt="Mark A. McFate"></a>
<h2>The Grinnell College Digital Library Application Developer's Blog</h2>
<div class=author-block>
<p class=site-rev>
Compiled: Oct 5, 2021 at 7:03pm CDT<br>
Content Updated: 2021-Oct-5 19:02 CDT
</p>
<div class=name>by
<strong>Mark A. McFate</strong></div>
<div class=address>Grinnell College Libraries</div>
<div class=link><a href=mailto:></a></div>
<br>
</div>
<nav class=sidebar-nav>
<a class=sidebar-nav-item href=https://static.grinnell.edu/dlad-blog/search/ title>Search This Blog</a>
<a class=sidebar-nav-item href=https://static.grinnell.edu/dlad-blog/about/ title>About Me</a>
</nav>
<p class=site-description>Mark's first Hugo site, a blog, formerly at Static.Grinnell.edu, moved to DigitalOcean, and now hosted on Azure.</p>
<div class=app-header-social>
<a target=_blank href=https://github.com/McFateM><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><title>github</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a>
<a target=_blank href=https://twitter.com/gohugoio><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter"><title>twitter</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a>
</div>
<p class=copyright>The views and opinions expressed on this site belong solely to the original author(s) and do not necessarily represent or reflect those of Grinnell College.</p>
</header>
<main class=app-container>
<div class=breadcrumbs>
<a href=https://static.grinnell.edu/dlad-blog/>Home</a>
&bull; <a href=https://static.grinnell.edu/dlad-blog/posts/>Posts</a>
&bull; <a href=https://static.grinnell.edu/dlad-blog/posts/091-fixing-mixed-mode-errors/>091 fixing mixed mode errors</a>
</div>
<article class=post>
<header class=post-header>
<h1 class=post-title>Fixing 'Mixed Content' Errors</h1>
<div class=post-meta>
<div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
3 min read
&nbsp;&nbsp;&bull;&nbsp;&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
Sep 11, 2020
&nbsp;&nbsp;&bull;&nbsp;&nbsp;Updated: Oct 5, 2020 - 09:22
&nbsp;&nbsp;&bull;&nbsp;&nbsp;<strong><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-at-sign"><title>at-sign</title><circle cx="12" cy="12" r="4"/><path d="M16 8v5a3 3 0 006 0v-1a10 10 0 10-3.92 7.94"/></svg> Mark A. McFate</strong>
<div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
<a class=tag href=https://static.grinnell.edu/dlad-blog/tags/error/>error</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/javascript/>JavaScript</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/.htaccess/>.htaccess</a></div></div>
</header>
<div class=post-content>
<p>Last evening, just before the <a href=https://en.wikipedia.org/wiki/Kansas_City_Chiefs>World Champion Kansas City Chiefs</a> kicked off the NFL&rsquo;s 2020-21 season (I hope the season is healthy all the way into 2021), I attempted to update all the <em>Drupal</em> contrib modules, and core, in my new <a href=https://dg.localdomain>local instance of ISLE</a> as chronicled in the <code>Next Steps</code> chapter of <a href=https://static.grinnell.edu/blogs/McFateM/posts/090-isle-local-migration-customization/>ISLE Local Migration Customization</a>. Ultimately that update process left me with a host of incorrect owner/group/permissions issues in the <em>Drupal</em> code, and I was able to remedy those in short order. But that left me with lots of remaining &lsquo;<a href=https://developers.google.com/web/fundamentals/security/prevent-mixed-content/what-is-mixed-content>mixed content</a>&rsquo;, or &lsquo;mixed mode&rsquo;, errors.</p>
<h2 id=whats-a-mixed-content-error>What&rsquo;s a &lsquo;Mixed Content&rsquo; Error?</h2>
<p>ISLE, and virtually everything I do on the web these days is run in <code>https</code>, that is to say that all my web sites and apps are accessible via <code>https://subdomain.domain</code> style references, where the <code>s</code> in <code>https</code> stands for &ldquo;secure&rdquo;. It is vitally important! So a &ldquo;mixed content&rdquo; error is one that generally is exposed in a message like this:</p>
<pre tabindex=0><code>Blocked loading mixed active content &quot;http://dg.localdomain/sites/default/files/css/css_lQaZfjVpwP_oGNqdtWCSpJT1EMqXdMiU84ekLLxQnc4.css&quot;
</code></pre><p>Note that there&rsquo;s NO <code>s</code> at the end of <code>http</code> in that message. Essentially, this means that the offending CSS, in this particular case, is coded to use an <code>http://</code> reference to a resource, but our process and browser are expecting &ldquo;secure&rdquo; communications and use of <code>https</code> throughout. That condition is what I have come to call a &ldquo;mixed mode&rdquo; error, also commonly referred to as a &ldquo;mixed content&rdquo; condition.</p>
<h2 id=not-my-first-rodeo>Not My First Rodeo</h2>
<p>I have encountered and corrected &ldquo;mixed content&rdquo; errors like this before, but only in some of my <a href=https://gohugo.io>Hugo</a> web sites, until now. The rather clumsy corrections I made in the <em>Hugo</em> instances didn&rsquo;t seem likely to work with ISLE and <em>Drupal</em>, so I was at a loss and getting frustrated that such a seemingly simple thing had brought my new ISLE instance to its knees.</p>
<h2 id=my-heroes-noah-smith-born-digital-and-the-icg>My Heroes: Noah Smith, Born-Digital, and the ICG</h2>
<p>Fortunately, when I get frustrated by such things I commonly turn to my esteemed colleagues in the <a href=https://islandora-collaboration-group.github.io/icg_information/>Islandora Collaboration Group (ICG)</a>. In this instance I posted a question to the group&rsquo;s <em>Slack</em> workspace and the <a href=https://icg-chat.slack.com/archives/CG6HZRWQM>#isle-support</a> channel. My dear friend <a href=https://www.linkedin.com/in/noahwsmith/>Noah Smith</a>, from <a href=https://born-digital.com/>Born-Digital (BD)</a>, saved the day with a very quick, concise, and elegant solution!</p>
<p>It seems my update to <em>Drupal</em> core included changes to my main <code>.htaccess</code> file, and apparently those changes removed one critical statement. The wisdom that Noah shared with me was this:</p>
<div class=original><p>this should be in there to force HTTPS</p>
<p><code>SetEnvIf X-Forwarded-Proto https HTTPS=on</code></p>
</div>
<p>I added that line to the end of <code>/var/www/html/.htaccess</code> in my <em>Apache</em> container and revisited <a href=https://dg.localdomain>https://dg.localdomain</a>&mldr; and it worked perfectly! Kudos and eternal gratitude to Noah and all my heroes at BD and the ICG!</p>
<h2 id=born-digitals-script>Born Digital&rsquo;s Script</h2>
<p>Noah related to me that at Born Digital they routinely run the following script.</p>
<pre tabindex=0><code>grep -ri 'SetEnvIf X-Forwarded-Proto https HTTPS=on' web/.htaccess || echo \&quot;SetEnvIf X-Forwarded-Proto https HTTPS=on\&quot; | tee -a web/.htaccess
</code></pre><p>And that&rsquo;s a 😃 wrap. Until next time&mldr;</p>
</div>
<div class=post-footer>
<div id=disqus_thread></div>
<script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//digital-library-applications-developer-blog.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
<a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
</div>
</article>
</main>
</body>
</html>