<!doctype html><html lang=en-us>
<head>
<title>Moving Static Sites to GitHub Pages // The Grinnell College Digital Library Application Developer's Blog</title>
<meta charset=utf-8>
<meta name=generator content="Hugo 0.88.1">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=author content="Mark A. McFate">
<meta name=description content>
<link rel=stylesheet href=/css/main.8a32dadea1834ef74fe59f5362dbaaa416e123d8600158d361ad3d96945c0aa5.css>
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Moving Static Sites to GitHub Pages">
<meta name=twitter:description content="Attention: This post effectively superseeds post 109.
 Pertinent Resources This section simply tabluates the posts and documentation used to effect migration of all sites from the Grinnell College static host to GitHub Pages.
   Resource Address     Hugo: Host on GitHub https://gohugo.io/hosting-and-deployment/hosting-on-github/   GitHub: Getting started with GitHub Pages https://docs.github.com/en/pages/getting-started-with-github-pages   GitHub: Creating a GitHub Pages site https://docs.github.com/en/pages/getting-started-with-github-pages/creating-a-github-pages-site   GitHub: Managing a custom domain for your GitHub Pages site https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#configuring-a-subdomain    Customizations publishDir = &ldquo;docs&rdquo; Do NOT change the publishDir parameter in your configuration, if you even have one!">
<meta property="og:title" content="Moving Static Sites to GitHub Pages">
<meta property="og:description" content="Attention: This post effectively superseeds post 109.
 Pertinent Resources This section simply tabluates the posts and documentation used to effect migration of all sites from the Grinnell College static host to GitHub Pages.
   Resource Address     Hugo: Host on GitHub https://gohugo.io/hosting-and-deployment/hosting-on-github/   GitHub: Getting started with GitHub Pages https://docs.github.com/en/pages/getting-started-with-github-pages   GitHub: Creating a GitHub Pages site https://docs.github.com/en/pages/getting-started-with-github-pages/creating-a-github-pages-site   GitHub: Managing a custom domain for your GitHub Pages site https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#configuring-a-subdomain    Customizations publishDir = &ldquo;docs&rdquo; Do NOT change the publishDir parameter in your configuration, if you even have one!">
<meta property="og:type" content="article">
<meta property="og:url" content="/posts/112-moving-static-sites-to-github-pages/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-10-05T00:00:00+00:00">
<meta property="article:modified_time" content="2021-10-05T18:47:51-05:00">
</head>
<body>
<header class=app-header>
<a href><img class=app-header-avatar src=/avatar.jpg alt="Mark A. McFate"></a>
<h2>The Grinnell College Digital Library Application Developer's Blog</h2>
<div class=author-block>
<p class=site-rev>
Compiled: Oct 5, 2021 at 6:48pm CDT<br>
Content Updated: 2021-Oct-5 18:47 CDT
</p>
<div class=name>by
<strong>Mark A. McFate</strong></div>
<div class=address>Grinnell College Libraries</div>
<div class=link><a href=mailto:></a></div>
<br>
</div>
<nav class=sidebar-nav>
<a class=sidebar-nav-item href=/search/ title>Search This Blog</a>
<a class=sidebar-nav-item href=/about/ title>About Me</a>
</nav>
<p class=site-description>Mark's first Hugo site, a blog, formerly at Static.Grinnell.edu, moved to DigitalOcean, and now hosted on Azure.</p>
<div class=app-header-social>
<a target=_blank href=https://github.com/McFateM><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><title>github</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a>
<a target=_blank href=https://twitter.com/gohugoio><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter"><title>twitter</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a>
</div>
<p class=copyright>The views and opinions expressed on this site belong solely to the original author(s) and do not necessarily represent or reflect those of Grinnell College.</p>
</header>
<main class=app-container>
<div class=breadcrumbs>
<a href>Home</a>
&bull; <a href=posts/>Posts</a>
&bull; <a href=posts/112-moving-static-sites-to-github-pages/>112 moving static sites to github pages</a>
</div>
<article class=post>
<header class=post-header>
<h1 class=post-title>Moving Static Sites to GitHub Pages</h1>
<div class=post-meta>
<div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
2 min read
&nbsp;&nbsp;&bull;&nbsp;&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
Oct 5, 2021
&nbsp;&nbsp;&bull;&nbsp;&nbsp;<strong><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-at-sign"><title>at-sign</title><circle cx="12" cy="12" r="4"/><path d="M16 8v5a3 3 0 006 0v-1a10 10 0 10-3.92 7.94"/></svg> Mark A. McFate</strong>
<div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
<a class=tag href=/tags/static/>static</a><a class=tag href=/tags/hugo/>hugo</a></div></div>
</header>
<div class=post-content>
<div class=annotation><p>Attention: This post effectively superseeds <a href=content/posts/109-moving-static-sites-to-azure.md.md>post 109</a>.</p>
</div>
<h1 id=pertinent-resources>Pertinent Resources</h1>
<p>This section simply tabluates the posts and documentation used to effect migration of all sites from the <em>Grinnell College</em> <code>static</code> host to <em>GitHub Pages</em>.</p>
<table>
<thead>
<tr>
<th>Resource</th>
<th>Address</th>
</tr>
</thead>
<tbody>
<tr>
<td>Hugo: Host on GitHub</td>
<td><a href=https://gohugo.io/hosting-and-deployment/hosting-on-github/>https://gohugo.io/hosting-and-deployment/hosting-on-github/</a></td>
</tr>
<tr>
<td>GitHub: Getting started with GitHub Pages</td>
<td><a href=https://docs.github.com/en/pages/getting-started-with-github-pages>https://docs.github.com/en/pages/getting-started-with-github-pages</a></td>
</tr>
<tr>
<td>GitHub: Creating a GitHub Pages site</td>
<td><a href=https://docs.github.com/en/pages/getting-started-with-github-pages/creating-a-github-pages-site>https://docs.github.com/en/pages/getting-started-with-github-pages/creating-a-github-pages-site</a></td>
</tr>
<tr>
<td>GitHub: Managing a custom domain for your GitHub Pages site</td>
<td><a href=https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#configuring-a-subdomain>https://docs.github.com/en/pages/configuring-a-custom-domain-for-your-github-pages-site/managing-a-custom-domain-for-your-github-pages-site#configuring-a-subdomain</a></td>
</tr>
</tbody>
</table>
<h1 id=customizations>Customizations</h1>
<h2 id=publishdir--docs>publishDir = &ldquo;docs&rdquo;</h2>
<p>Do <em>NOT</em> change the <code>publishDir</code> parameter in your configuration, if you even have one! The default <code>public</code> setting is correct.</p>
<p>~Note that in all cases I found it necessary to conform to <em>GitHub</em> practice of publishing content from a <code>./docs</code> site subdirectory rather than from <code>./public</code>, the default <em>Hugo</em> behavior. Publishing from <code>./docs</code> is default behavior for <em>Jekyll</em>, and that static generator is commonly used in <em>GitHub</em> pages. The <code>./docs</code> setting typically appears in a site&rsquo;s front matter within <code>config.toml</code> as: <code>publishDir = "docs"</code>.~</p>
<h2 id=gh-pagesyml>gh-pages.yml</h2>
<p><a href=https://gohugo.io/hosting-and-deployment/hosting-on-github/>Host on GitHub</a> directs us to create a new <code>.github/workflows/gh-pages.yml</code> file in each project. This file directs <em>GitHub</em> to build a <em>Hugo</em> site each time a triggering event, like a &ldquo;push&rdquo;, takes place.</p>
<p>The document specifies the following contents plus a few additions of my own:</p>
<pre tabindex=0><code>name: github pages

on:
  push:
    branches:
      - main  # Set a branch to deploy
  pull_request:

jobs:
  deploy:
    runs-on: ubuntu-20.04
    steps:
      - uses: actions/checkout@v2
        with:
          submodules: true  # Fetch Hugo themes (true OR recursive)
          fetch-depth: 0    # Fetch all history for .GitInfo and .Lastmod

      - uses: szenius/set-timezone@v1.0  # per https://github.com/marketplace/actions/set-timezone
        with:
          timezoneLinux: &quot;America/Chicago&quot;

      - name: Setup Hugo
        uses: peaceiris/actions-hugo@v2
        with:
          hugo-version: 'latest'
          extended: true

      - name: Build
        run: hugo --minify

      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        if: github.ref == 'refs/heads/main'
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./public
</code></pre><h2 id=github-pages-settings>GitHub Pages Settings</h2>
<p>It&rsquo;s not documented well, but <em>important to note</em> that this workflow will create a new <code>gh-pages</code> branch of your repo and the <code>root</code> of that branch is what you should publish! <em>Pay attention to that setting in the figure below!</em></p>
<p>To complete the process of creating a <em>GitHub Pages</em> site you&rsquo;ll need to visit your repository&rsquo;s <a href=https://github.com/Digital-Grinnell/Digital-Grinnell.github.io/settings/pages>GitHub Pages Settings</a> page and make selections like you see in the figure below. The example below is taken from <a href=https://github.com/Digital-Grinnell/Digital-Grinnell.github.io/settings/pages>https://github.com/Digital-Grinnell/Digital-Grinnell.github.io/settings/pages</a>.</p>
<link rel=stylesheet href=/css/hugo-easy-gallery.css>
<div class=box>
<figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject>
<div class=img>
<img itemprop=thumbnail src=/images/post-112/gh-pages-settings.png>
</div>
<a href=/images/post-112/gh-pages-settings.png itemprop=contentUrl></a>
<figcaption><h4>GH Pages Settings</h4>
</figcaption>
</figure>
</div>
<h1 id=completed-migrations>Completed Migrations</h1>
<table>
<thead>
<tr>
<th>CNAME Assigned</th>
<th>New GH Address</th>
<th>GitHub Repo</th>
<th>Old Address</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href=https://static.grinnell.edu/>https://static.grinnell.edu/</a></td>
<td><a href=https://digital-grinnell.github.io/>https://digital-grinnell.github.io/</a></td>
<td><a href=https://github.com/Digital-Grinnell/Digital-Grinnell.github.io>https://github.com/Digital-Grinnell/Digital-Grinnell.github.io</a></td>
<td><a href=https://static.grinnell.edu>https://static.grinnell.edu</a></td>
</tr>
<tr>
<td><a href=https://static.grinnell.edu/dlad-blog/>https://static.grinnell.edu/dlad-blog/</a></td>
<td><a href=https://digital-grinnell.github.io/dlad-blog/>https://digital-grinnell.github.io/dlad-blog/</a></td>
<td><a href=https://github.com/Digital-Grinnell/dlad-blog>https://github.com/Digital-Grinnell/dlad-blog</a></td>
<td><a href=https://static.grinnell.edu/blogs-McFateM>https://static.grinnell.edu/blogs-McFateM</a></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>And that&rsquo;s a wrap. Until next time&mldr;</p>
</div>
<div class=post-footer>
<div id=disqus_thread></div>
<script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return}var b=document,a=b.createElement('script');a.async=!0,a.src='//digital-library-applications-developer-blog.disqus.com/embed.js',a.setAttribute('data-timestamp',+new Date),(b.head||b.body).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
<a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
</div>
</article>
</main>
</body>
</html>