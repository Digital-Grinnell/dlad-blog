<!doctype html><html lang=en-us><head><title>Compact Build of dg.localdomain - Concise Instructions // The Grinnell College Digital Library Application Developer's Blog</title><meta charset=utf-8><meta name=generator content="Hugo 0.104.3"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Mark A. McFate"><meta name=description content><link rel=stylesheet href=https://static.grinnell.edu/dlad-blog/css/main.min.ec5c8abc0625bee34a87b8624d3c683035583f8314d537f8d266c9f01ad58d83.css><script type=text/javascript src=https://static.grinnell.edu/dlad-blog/js/pdf-js/build/pdf.js></script><meta name=twitter:card content="summary"><meta name=twitter:title content="Compact Build of dg.localdomain - Concise Instructions"><meta name=twitter:description content="This post is an addendum to an earlier post, Local ISLE Installation: Migrate Existing Islandora Site - with Annotations, where I exhaustively documented my workflow for building a local/development instance of ISLE to mimic the behavoir of Digital.Grinnell.
Goal The goal of this project is to present a repeatable, minimal set of instructions for spinning up a safe, stand-alone, local/development instance of ISLE on any Mac running OS X.
Prerequisites This document assumes the user will be spinning up https://dg.localdomain on a Mac with a suitable DG-FEDORA USB stick mounted and accessible."><meta property="og:title" content="Compact Build of dg.localdomain - Concise Instructions"><meta property="og:description" content="This post is an addendum to an earlier post, Local ISLE Installation: Migrate Existing Islandora Site - with Annotations, where I exhaustively documented my workflow for building a local/development instance of ISLE to mimic the behavoir of Digital.Grinnell.
Goal The goal of this project is to present a repeatable, minimal set of instructions for spinning up a safe, stand-alone, local/development instance of ISLE on any Mac running OS X.
Prerequisites This document assumes the user will be spinning up https://dg.localdomain on a Mac with a suitable DG-FEDORA USB stick mounted and accessible."><meta property="og:type" content="article"><meta property="og:url" content="https://static.grinnell.edu/dlad-blog/posts/094-compact-build-of-dg.localdomain/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-10-20T00:00:00+00:00"><meta property="article:modified_time" content="2020-10-21T20:18:39-05:00"></head><body><header class=app-header><a href=https://static.grinnell.edu/dlad-blog/><img class=app-header-avatar src=https://static.grinnell.edu/dlad-blog/avatar.jpg alt="Mark A. McFate"></a><h2>The Grinnell College Digital Library Application Developer's Blog</h2><div class=author-block><p class=site-rev>Compiled: Oct 5, 2022 at 1:46pm CDT<br>Content Updated: 2022-Oct-5 00:00 UTC</p><div class=name>by
<strong>Mark A. McFate</strong></div><div class=address>Grinnell College Libraries</div><div class=link><a href=mailto:></a></div><br></div><nav class=sidebar-nav><a class=sidebar-nav-item href=https://static.grinnell.edu/dlad-blog/search/ title>Search This Blog</a>
<a class=sidebar-nav-item href=https://static.grinnell.edu/dlad-blog/about/ title>About Me</a></nav><p class=site-description>Mark's first Hugo site, a blog, formerly at Static.Grinnell.edu, moved to DigitalOcean, and now hosted on Azure.</p><div class=app-header-social><a target=_blank href=https://github.com/McFateM><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><title>github</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a target=_blank href=https://twitter.com/gohugoio><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter"><title>twitter</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a></div><p class=copyright>The views and opinions expressed on this site belong solely to the original author(s) and do not necessarily represent or reflect those of Grinnell College.</p></header><main class=app-container><div class=breadcrumbs><a href=https://static.grinnell.edu/dlad-blog/>Home</a>
&bull; <a href=https://static.grinnell.edu/dlad-blog/posts/>Posts</a>
&bull; <a href=https://static.grinnell.edu/dlad-blog/posts/094-compact-build-of-dg.localdomain/>094 compact build of dg.localdomain</a></div><article class=post><header class=post-header><h1 class=post-title>Compact Build of dg.localdomain - Concise Instructions</h1><div class=post-meta><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>3 min read
&nbsp;&nbsp;&bull;&nbsp;&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
Oct 20, 2020
&nbsp;&nbsp;&bull;&nbsp;&nbsp;Updated: Oct 21, 2020 - 20:18
&nbsp;&nbsp;&bull;&nbsp;&nbsp;<strong><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-at-sign"><title>at-sign</title><circle cx="12" cy="12" r="4"/><path d="M16 8v5a3 3 0 006 0v-1a10 10 0 10-3.92 7.94"/></svg> Mark A. McFate</strong><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/isle/>ISLE</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/local/>local</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/development/>development</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/dg.localdomain/>dg.localdomain</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/concise/>concise</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/compact/>compact</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/dg-fedora/>DG-FEDORA</a></div></div></header><div class=post-content><p>This post is an addendum to an earlier post, <a href=https://static.grinnell.edu/dlad-blog/posts/087-rebuilding-isle-ld-again/>Local ISLE Installation: Migrate Existing Islandora Site - with Annotations</a>, where I exhaustively documented my workflow for building a local/development instance of ISLE to mimic the behavoir of <em>Digital.Grinnell</em>.</p><h2 id=goal>Goal</h2><p>The goal of this project is to present a repeatable, minimal set of instructions for spinning up a safe, stand-alone, local/development instance of ISLE on any Mac running OS X.</p><h2 id=prerequisites>Prerequisites</h2><p>This document assumes the user will be spinning up <a href=https://dg.localdomain>https://dg.localdomain</a> on a Mac with a suitable <code>DG-FEDORA</code> USB stick mounted and accessible. See my <a href=https://gist.github.com/Digital-Grinnell/f0900e9af9341e67433633be3fa0895d>README.md</a> public gist for complete instructions regarding creation, updates and handling of such a USB stick. Additional prerequisites for running <a href=https://dg.localdomain>https://dg.localdomain</a> can be found in ISLE documentation and in my <a href=https://static.grinnell.edu/dlad-blog/posts/046-dg-fedora-a-portable-object-repository/>DG-FEDORA: A Portable FEDORA Repository</a> blog post.</p><h2 id=credentials>Credentials</h2><p>Some of the scripts documented below may require login credentials including:</p><ul><li><p>Your workstation (Mac) password, and</p></li><li><p>A username and password combination authorizing you to clone the <a href=https://github.com/Digital-Grinnell/dg-isle>Digital-Grinnell/dg-isle</a> and <a href=https://github.com/Digital-Grinnell/dg-islandora>Digital-Grinnell/dg-islandora</a> <em>private</em> GitHub repositories.</p><ul><li>These credentials can be found inside the <code>Digital Grinnell Bits</code> portion of the GC Libraries&rsquo; <em>LastPass</em> vault. The information is listed there under the name <code>DG Private Repositories (dg-isle + dg-islandora)</code>.</li><li>Alternatively, you may obtain these credentials indirectly by emailing <code>digital@grinnell.edu</code>.</li></ul></li></ul><h2 id=four-restart-scripts>Four RESTART Scripts</h2><p>The process of spinning up a <code>https://dg.localdomain</code> stack has been boiled down to a sequence of roughly 20 necessary commands. While it would be possible to enter these commands sequentially into your workstation&rsquo;s terminal, there is a much easier path. The commands have been captured in a series of <em>bash</em> scripts named <code>RESTART-1.sh</code>, <code>RESTART-2.sh</code>, <code>RESTART-3.sh</code>, and <code>RESTART-4.sh</code>.</p><table><thead><tr><th>Script</th><th>Number of Commands</th><th>Purpose</th></tr></thead><tbody><tr><td>RESTART-1.sh</td><td>~15 commands</td><td>This script does all the heavy lifting. It creates and populates the necessary directory structure, clones project repositories, pull Docker images, and launches 7 containers that define a minimal ISLE stack.</td></tr><tr><td>RESTART-2.sh</td><td>1 command repeated up to 10 times over a ten-minute span</td><td>This script echoes the log file of the last command executed in <code>RESTART-1.sh</code>.</td></tr><tr><td>RESTART-3.sh</td><td>4 commands</td><td>This script imports a previously exported Drupal database, updates some dynamic components, and begins the process of indexing DG-FEDORA&rsquo;s digital objects.</td></tr><tr><td>RESTART-4.sh</td><td>2 commands</td><td>This script wraps things up by recreating DG-FEDORA&rsquo;s Solr index and flushing the Drupal caches.</td></tr></tbody></table><p>All four scripts can be found on your <code>DG-FEDORA</code> USB stick.</p><h2 id=typical-use>Typical Use</h2><p>With a <code>DG-FEDORA</code> USB stick properly mounted on your Mac, you simply need to open a terminal window and execute the following command sequence:</p><pre tabindex=0><code>cd /Volumes/DG-FEDORA
./RESTART-1.sh
./RESTART-2.sh
./RESTART-3.sh
./RESTART-4.sh
</code></pre><p><strong>DO NOT simply copy and paste these commands into your terminal!</strong> They need to be run one-at-a-time, in sequence, with execution of each command following successful completion of the previous command.</p><h2 id=colors>Colors</h2><p>Each script will set your terminal background to <code>black</code> and subsequently provide output using the following color scheme:</p><table><thead><tr><th>Color</th><th>Meaning</th></tr></thead><tbody><tr><td>Cyan</td><td>Normal output</td></tr><tr><td>Yellow</td><td>Progress or status messages</td></tr><tr><td>Green</td><td>Successful completion messages</td></tr><tr><td>Magenta</td><td>Prompts and alerts. Pay particular attention to these!</td></tr><tr><td>Red</td><td>Errors</td></tr></tbody></table><h2 id=troubleshooting>Troubleshooting</h2><p><em>This section of the document will be populated as issues are encountered. If you have a question or concern, or encounter any issues with this process please bring it to my attention by emailing <code>digital@grinnell.edu</code>. Your experience and feedback will help shape this section for the benefit of others! Thank you!</em></p><p>And that&rsquo;s a wrap. Until next time or until the feedback starts to roll in, whichever comes first&mldr;</p></div><div class=post-footer><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//digital-library-applications-developer-blog.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></article></main></body></html>