<!doctype html><html lang=en><head><title>Dealing with Alma Dedup and FRBR // The Grinnell College Digital Library Application Developer's Blog</title>
<meta charset=utf-8><meta name=generator content="Hugo 0.140.0"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Mark A. McFate"><meta name=description content="A public blog post copied from `Dealing-with-Alma-Dedup-and-FRBR.md` in my private repo at https://github.com/Digital-Grinnell/Migration-to-Alma-D."><link rel=stylesheet href=https://static.grinnell.edu/dlad-blog/css/main.min.5efe2f062080343a28f3b21576ff0c6dbf2b0a5d89ed855f45479992bd62d0e6.css><script type=text/javascript src=https://static.grinnell.edu/dlad-blog/js/pdf-js/build/pdf.js></script><script async src="https://www.googletagmanager.com/gtag/js?id=288703662"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","288703662")}</script><meta name=twitter:card content="summary"><meta name=twitter:title content="Dealing with Alma Dedup and FRBR"><meta name=twitter:description content="A public blog post copied from `Dealing-with-Alma-Dedup-and-FRBR.md` in my private repo at https://github.com/Digital-Grinnell/Migration-to-Alma-D."><meta property="og:url" content="https://static.grinnell.edu/dlad-blog/posts/149-dealing-with-alma-dedup-and-frbr/"><meta property="og:site_name" content="The Grinnell College Digital Library Application Developer's Blog"><meta property="og:title" content="Dealing with Alma Dedup and FRBR"><meta property="og:description" content="A public blog post copied from `Dealing-with-Alma-Dedup-and-FRBR.md` in my private repo at https://github.com/Digital-Grinnell/Migration-to-Alma-D."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-12-19T12:48:37+00:00"><meta property="article:modified_time" content="2024-12-19T12:48:37+00:00"><meta property="article:tag" content="Dedup"><meta property="article:tag" content="FRBR"><meta property="article:tag" content="Alma"><meta property="article:tag" content="Primo"><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="https://analytics.summittservices.com/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","16"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></head><body><header class=app-header><a href=https://static.grinnell.edu/dlad-blog/><img class=app-header-avatar src=https://static.grinnell.edu/dlad-blog/avatar.jpg alt="Mark A. McFate"></a><h2>The Grinnell College Digital Library Application Developer's Blog</h2><div class=author-block><p class=site-rev>Compiled: Dec 20, 2024 at 8:45am CST<br>Content Updated: 2024-Dec-19 17:08 CST</p><div class=name>by
<strong>Mark A. McFate</strong></div><div class=address>Grinnell College Libraries</div><div class=link><a href=mailto:></a></div><br></div><nav class=sidebar-nav><a class=sidebar-nav-item href=https://static.grinnell.edu/dlad-blog/search/ title>Search This Blog</a>
<a class=sidebar-nav-item href=https://static.grinnell.edu/dlad-blog/about/ title>About Me</a></nav><p class=site-description>Mark&rsquo;s first Hugo site, a blog, formerly on prem at Static.Grinnell.edu, moved to <em>DigitalOcean</em>, then to <em>Azure</em>, and now hosted on <em>GitHub Pages</em>.</p><div class=app-header-social><a target=_blank href=https://github.com/McFateM><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><title>github</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a>
<a target=_blank href=https://twitter.com/gohugoio><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter"><title>twitter</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a></div><p class=copyright>The views and opinions expressed on this site belong solely to the original author(s) and do not necessarily represent or reflect those of Grinnell College.</p></header><main class=app-container><div class=breadcrumbs><a href=https://static.grinnell.edu/dlad-blog/>Home</a>
&bull; <a href=https://static.grinnell.edu/dlad-blog/posts/>Posts</a>
&bull; <a href=https://static.grinnell.edu/dlad-blog/posts/149-dealing-with-alma-dedup-and-frbr/>149 dealing with alma dedup and frbr</a></div><article class=post><header class=post-header><h1 class=post-title>Dealing with Alma Dedup and FRBR</h1><div class=post-meta><script>console.log("Hugo Debug: ",JSON.parse('"2024-12-20T12:48:37Z"'))</script><script>console.log("Hugo Debug: ",JSON.parse('"2024-12-19T12:48:37Z"'))</script><script>console.log("Hugo Debug: ",JSON.parse('"2024-12-20T08:45:33Z"'))</script><div><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
6 min read
&nbsp;&nbsp;&bull;&nbsp;&nbsp;
<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
Dec 19, 2024
&nbsp;&nbsp;&bull;&nbsp;&nbsp;<strong><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-at-sign"><title>at-sign</title><circle cx="12" cy="12" r="4"/><path d="M16 8v5a3 3 0 006 0v-1a10 10 0 10-3.92 7.94"/></svg> Mark A. McFate</strong><div><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg>
<a class=tag href=https://static.grinnell.edu/dlad-blog/tags/dedup/>Dedup</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/frbr/>FRBR</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/alma/>Alma</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/primo/>Primo</a></div></div></header><div class=post-content><h1 id=dealing-with-almaprimo-dedup-and-frbr>Dealing with Alma/Primo Dedup and FRBR</h1><p>Together, Alma and Primo (mostly Primo) apply &ldquo;dedup&rdquo; and &ldquo;FRBR&rdquo; (Functional Requirements for Bibliographic Records) rules that unexpectedly &ldquo;group&rdquo; similar titles together. Since the objects migrating from Islandora to Alma are all intended to be single and un-grouped (unless they are parts of a compound object where we expect and an intentional &ldquo;grouping&rdquo; of records), we need to take action to deal with these rules. Unfortunately, we cannot just turn the rules off or universally modify them since those rules also apply to ALL bib records, not just digital items.</p><h1 id=understanding-the-rules>Understanding the Rules</h1><p>I have yet to see these rules in-the-flesh, but the observed effects suggest that&mldr;</p><ol><li><p>Any two or more bib records that have matching titles and/or alternative titles will be grouped together.</p></li><li><p>Any two or more bib records that have a matching <code>dc:identifier</code> value will be grouped together. Keep in mind that <code>dc:identifier</code>, and similar fields, are multi-valued so this means that if any one value is identical to an identifier value from another bib, the two will be grouped together.</p></li></ol><p><em>I deem this to be a very &ldquo;good&rdquo; rule. It should help to catch true duplicate bibs since <code>dc:identifier</code>, and other ID fields, should be universally unique.</em></p><ol start=3><li>Like <code>dc:identifier</code>, alternative title is a multi-valued field, so ANY alt title value from a record that has an identical title or alt title in another will be will be grouped together.</li></ol><p><em>This caused major headaches for migration since many collections used the alt title field to carry subject-like information.</em></p><ol start=4><li>Alma and Primo appear to tokenize the title and alternative title fields (and other fields too) such that embedded punctuation can cause two similar records to be grouped together. For example&mldr;</li></ol><p>The record <a href=https://grinnell.primo.exlibrisgroup.com/permalink/01GCL_INST/1g018f9/alma991011506419704641>https://grinnell.primo.exlibrisgroup.com/permalink/01GCL_INST/1g018f9/alma991011506419704641</a> was originally &ldquo;grouped&rdquo; with <a href=https://grinnell.primo.exlibrisgroup.com/permalink/01GCL_INST/1g018f9/alma991011506420404641>https://grinnell.primo.exlibrisgroup.com/permalink/01GCL_INST/1g018f9/alma991011506420404641</a> even though the two records have very different content and no identical title, alt title, or identifier fields values. The alt titles of these bibs are &ldquo;First year tutorial, Fall 2001&rdquo; and &ldquo;Tutorial, Fall 2001&rdquo;, respectively. The presence of the embedded comma in each apparently causes the &ldquo;Fall 2001&rdquo; portion of each alt title to engage dedup and group these very different bib together.</p><h2 id=resolving-dedup-and-frbr-problems>Resolving Dedup and FRBR Problems</h2><p>The following email and Slack excerpts chronicle steps taken to deal specifically with the situation documented in bullet 4 above.</p><h3 id=from-slack>From Slack&mldr;</h3><blockquote><p>Following up on our conversation yesterday (<a href=https://gcl-org.slack.com/archives/C04EMUD2M7Z/p1723563107993219>https://gcl-org.slack.com/archives/C04EMUD2M7Z/p1723563107993219</a>)…</p></blockquote><blockquote><p>There’s no change in the Syllabi and Curricular Materials collection this morning, we still have 52 items but I was hoping to see 53 (the correct total) after making a change that would de-dup on pair of items that got incorrectly tagged as duplicates because of an errant (and identical) pair of alt title elements.</p></blockquote><blockquote><p>The MMS_IDs are <code>991 01150 64197 04641</code> and <code>991 01150 64204 04641</code>, objects <code>grinnell:3452</code> and <code>grinnell:3459</code>. They both happen to have HAD alt title values that included <code>Tutorial, Fall 2001</code>. Yesterday I changed one of the object’s alt title values in the hope that it would un-dedup, but clearly it did not.</p></blockquote><blockquote><p>So, now the question is what to do about this? I hate to blow these away and re-import them. Not a terrible solution this time, but I fear this is going to keep happening so I’m holding out hope there is a better way.</p></blockquote><blockquote><p>Julia identified a potentially better way of dealing with this at <a href=https://knowledge.exlibrisgroup.com/Primo/Product_Documentation/020Primo_VE/Primo_VE_(English)/090Dedup_and_FRBR_for_Primo_VE/010Understanding_the_Dedup_and_FRBR_Processes_(Primo_VE)>https://knowledge.exlibrisgroup.com/Primo/Product_Documentation/020Primo_VE/Primo_VE_(English)/090Dedup_and_FRBR_for_Primo_VE/010Understanding_the_Dedup_and_FRBR_Processes_(Primo_VE)</a>.</p></blockquote><h3 id=ex-libris-support-suggested-this>Ex Libris support suggested this&mldr;</h3><blockquote><p>Yes, you can put all the MMS IDs for your DG content in the set, including ones that have not been deduped. The job will mark all records in the set ineligible for dedup/frbr. You can run the job at any time, including after your migration is done. You could do it now and again after the migration too. There is no harm in running it now on the existing records, and again after the full migration.</p></blockquote><blockquote><p>For the job &ldquo;&ldquo;Prevent FRBR and/or Dedup in Discovery&rdquo;, the documentation notes that it will prevent dedup/frbr on records that have not been grouped. However, in my experience, it also breaks up the existing groups.</p></blockquote><h3 id=my-response-to-the-related-help-ticket>My response to the related help ticket&mldr;</h3><blockquote><p>Since I was reminded of this, I took steps to give the process a try. Not sure about the outcome yet so I wonder if you could help us determine if it worked or not? Moments ago, I ran job 6980681020004641 and gave it a set of 151 MMS Ids to process. Among those IDs was 991011506419704641, one of two bib records that previously grouped together as matching. This was presumably because an alt title in each record had embedded punctuation, a comma, AND a small portion of their alt titles were an identical match. It seems the presence of punctuation in the title or alt title has an unexpected impact on the dedup results? The other matched record is 991011506420404641 and you can see them both grouped together at <a href="https://grinnell.primo.exlibrisgroup.com/discovery/search?query=any,contains,991011506420404641&amp;tab=Everything&amp;search_scope=MyInst_and_CI&amp;sortby=rank&amp;vid=01GCL_INST:GCL&amp;lang=en&amp;offset=0">https://grinnell.primo.exlibrisgroup.com/discovery/search?query=any,contains,991011506420404641&amp;tab=Everything&amp;search_scope=MyInst_and_CI&amp;sortby=rank&amp;vid=01GCL_INST:GCL&amp;lang=en&amp;offset=0</a>.</p></blockquote><blockquote><p>It&rsquo;s been 20 minutes since I ran the job and the two records in Primo still show up as versions of the same thing, which they are NOT. Can you tell me if the process worked, and if it did, how long do I have to wait to see the result in Primo? Or do I need to list BOTH MMS IDs in my set/job for the group to be break apart? Thanks. -Mark M.</p></blockquote><h3 id=outcome>Outcome</h3><p>Eventually, after about an hour the targeted group of bibs was &ldquo;disolved&rdquo; yielding two distinct records as was intended, rather than a group with two &ldquo;versions&rdquo;.</p><style>.alert{border:2px red solid}</style><div class="original alert"><p>Experience with PHPP Community Contribution objects having identical titles of &ldquo;411 First Avenue&rdquo; suggests that DIP records &ndash;see post <a href=../150-discovery-import-profile-dip-record-removal/>Discovery Import Profile (DIP) Record Removal</a>&ndash; <strong>MUST be removed BEFORE running the dedup suppression</strong> job, otherwise the dedup may not be successfully suppressed.</p></div><h2 id=suppressing-dedup-and-frbr-rules>Suppressing Dedup and FRBR Rules</h2><p>The workflow needed to suppress grouping of specific records is documented at <a href=https://knowledge.exlibrisgroup.com/Primo/Product_Documentation/020Primo_VE/Primo_VE_(English)/090Dedup_and_FRBR_for_Primo_VE/Suppressing_Groups_of_Records_from_Dedup%2F%2FFRBR_for_Primo_VE>https://knowledge.exlibrisgroup.com/Primo/Product_Documentation/020Primo_VE/Primo_VE_(English)/090Dedup_and_FRBR_for_Primo_VE/Suppressing_Groups_of_Records_from_Dedup%2F%2FFRBR_for_Primo_VE</a>. Note that while this is a &ldquo;post-processing&rdquo; step, it&rsquo;s useful only AFTER records have been imported, it does appear to &ldquo;dissolve&rdquo; existing unintended grouping as was suggested in the email excerpt which appears in <code>Ex Libris support suggested this...</code> above.</p><p>In a nutshell, the workflow involves the following steps:</p><ol><li><p>Create a single column .csv file with a column heading of <code>MMS Id</code>.</p></li><li><p>Export all of the existing digital item MMS IDs from our <code>Digital Grinnell</code> collection and all subordinate collections in Alma.</p></li><li><p>Populate the .csv file with this list of exported MMS IDs, one ID per line.</p></li></ol><blockquote><p>Note that steps 1-3 can easily be compressed into a single operation using <code>Analytics</code> and the <code>List-ALL-Active-DCAP01-Bibs- MMS-Only</code> query stored in <code>/Shared Folders/Grinnell College Libraries 01GCL_INST/DG Migration</code>.</p></blockquote><ol start=4><li><p>Create a new itemized record &ldquo;set&rdquo; using the .csv file as input. Note that the set named <code>All DG Imported Active Bibs</code> (ID = 6993436050004641) may be updated and used as necessary.</p></li><li><p>Select and run the <code>Prevent FRBR and/or Dedup in Discovery</code> applying the itemized set mentioned above.</p></li><li><p>Set both <code>Prevent FRBR in Discovery?</code> and <code>Prevent Dedup in Discovery?</code> parameters to <code>YES</code>.</p></li><li><p>Submit the job and wait for results. Note that once the job completes it may take hours before the effects are fully visible in Primo!</p></li></ol></div><div class=post-footer><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//digital-library-applications-developer-blog.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></article></main></body></html>