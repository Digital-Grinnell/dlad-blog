<!doctype html><html lang=en-us><head><title>Creating a Migration Collection // The Grinnell College Digital Library Application Developer's Blog</title><meta charset=utf-8><meta name=generator content="Hugo 0.110.0"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=author content="Mark A. McFate"><meta name=description content><link rel=stylesheet href=https://static.grinnell.edu/dlad-blog/css/main.min.bc1abb622a656fb4c816fed09d36c15e272b31b7beae2e7113b2f9418bff0361.css><script type=text/javascript src=https://static.grinnell.edu/dlad-blog/js/pdf-js/build/pdf.js></script><meta name=twitter:card content="summary"><meta name=twitter:title content="Creating a Migration Collection"><meta name=twitter:description content="As we continue to look at potential migration paths for our Digital.Grinnell (DG) content, it&rsquo;s become apparent that it would be nice to have a small &ldquo;test&rdquo; or &ldquo;migration&rdquo; collection of objects to play with. The collection should have a small, but diverse, set of objects covering all of the popular content, or CModel, types that we currently have in DG.
Since Slack now imposes a 90-day lifespan for posts (we are using only free-tier Slack services at this time) I thought I had better create this blog post to capture key parts of a relevant Slack conversation&mldr;"><meta property="og:title" content="Creating a Migration Collection"><meta property="og:description" content="As we continue to look at potential migration paths for our Digital.Grinnell (DG) content, it&rsquo;s become apparent that it would be nice to have a small &ldquo;test&rdquo; or &ldquo;migration&rdquo; collection of objects to play with. The collection should have a small, but diverse, set of objects covering all of the popular content, or CModel, types that we currently have in DG.
Since Slack now imposes a 90-day lifespan for posts (we are using only free-tier Slack services at this time) I thought I had better create this blog post to capture key parts of a relevant Slack conversation&mldr;"><meta property="og:type" content="article"><meta property="og:url" content="https://static.grinnell.edu/dlad-blog/posts/129-creating-a-migration-collection/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-10-12T00:00:00+00:00"><meta property="article:modified_time" content="2022-10-12T00:00:00+00:00"></head><body><header class=app-header><a href=https://static.grinnell.edu/dlad-blog/><img class=app-header-avatar src=https://static.grinnell.edu/dlad-blog/avatar.jpg alt="Mark A. McFate"></a><h2>The Grinnell College Digital Library Application Developer's Blog</h2><div class=author-block><p class=site-rev>Compiled: Feb 17, 2023 at 5:20pm CST<br>Content Updated: 2023-Feb-16 13:07 CST</p><div class=name>by
<strong>Mark A. McFate</strong></div><div class=address>Grinnell College Libraries</div><div class=link><a href=mailto:></a></div><br></div><nav class=sidebar-nav><a class=sidebar-nav-item href=https://static.grinnell.edu/dlad-blog/search/ title>Search This Blog</a>
<a class=sidebar-nav-item href=https://static.grinnell.edu/dlad-blog/about/ title>About Me</a></nav><p class=site-description>Mark&rsquo;s first Hugo site, a blog, formerly on prem at Static.Grinnell.edu, moved to <em>DigitalOcean</em>, then to <em>Azure</em>, and now hosted on <em>GitHub Pages</em>.</p><div class=app-header-social><a target=_blank href=https://github.com/McFateM><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github"><title>github</title><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77 5.44 5.44.0 003.5 8.55c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a><a target=_blank href=https://twitter.com/gohugoio><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter"><title>twitter</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a></div><p class=copyright>The views and opinions expressed on this site belong solely to the original author(s) and do not necessarily represent or reflect those of Grinnell College.</p></header><main class=app-container><div class=breadcrumbs><a href=https://static.grinnell.edu/dlad-blog/>Home</a>
&bull; <a href=https://static.grinnell.edu/dlad-blog/posts/>Posts</a>
&bull; <a href=https://static.grinnell.edu/dlad-blog/posts/129-creating-a-migration-collection/>129 creating a migration collection</a></div><article class=post><header class=post-header><h1 class=post-title>Creating a Migration Collection</h1><div class=post-meta><script>console.log("Hugo Debug: ",JSON.parse('"2022-10-13T00:00:00Z"'))</script><script>console.log("Hugo Debug: ",JSON.parse('"2022-10-12T00:00:00Z"'))</script><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock"><title>clock</title><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>22 min read
&nbsp;&nbsp;&bull;&nbsp;&nbsp;<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar"><title>calendar</title><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
Oct 12, 2022
&nbsp;&nbsp;&bull;&nbsp;&nbsp;<strong><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-at-sign"><title>at-sign</title><circle cx="12" cy="12" r="4"/><path d="M16 8v5a3 3 0 006 0v-1a10 10 0 10-3.92 7.94"/></svg> Mark A. McFate</strong><div><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag"><title>tag</title><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7.01" y2="7"/></svg><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/migration/>migration</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/collection/>collection</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/digital.grinnell/>Digital.Grinnell</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/iduf/>iduF</a><a class=tag href=https://static.grinnell.edu/dlad-blog/tags/jstor/>JSTOR</a></div></div></header><div class=post-content><p>As we continue to look at potential migration paths for our <a href=https://digital.grinnell.edu>Digital.Grinnell</a> (DG) content, it&rsquo;s become apparent that it would be nice to have a small &ldquo;test&rdquo; or &ldquo;migration&rdquo; collection of objects to play with. The collection should have a small, but diverse, set of objects covering all of the popular content, or <code>CModel</code>, types that we currently have in DG.</p><p>Since <em>Slack</em> now imposes a 90-day lifespan for posts (we are using only free-tier <em>Slack</em> services at this time) I thought I had better create this blog post to capture key parts of a relevant <em>Slack</em> conversation&mldr;</p><pre tabindex=0><code class=language-slack data-lang=slack>Mark M.  September 13, 2022 @ 11:49 AM

I modified my iduF MigrateObject command yesterday and now have it working on our staging server, https://isle-stage.grinnell.edu.  I’ve successfully created a new `grinnell:migration-test` collection there and have 42 objects shared into it via the new command.  I plan to add a few more, up to 50 total objects, this afternoon, but all of this is taking place only in isle-stage thus far.

I have a plan to repeat the process in digital.grinnell.edu if all goes well in staging, but before I do that I’d like to push isle-stage as far as I can.  That will include at least one export of the objects and metadata, probably using the same process I created for our  metadata review in 2020.  

I might also re-bag all of the objects and hold those bags in a dedicated network storage location apart from our traditional backup storage.

Any other ideas/suggestions how I might “export” these objects?  Maybe a better question… What target platforms should I plan to provide exports for so that test objects can be ingested as part of migration testing/evaluation?
</code></pre><h2 id=the-migrateobject-command>The <code>MigrateObject</code> Command</h2><p>As mentioned above, I elected to use the <code>iduF</code> command named <code>MigrateObject</code> to populate a new collection named <code>grinnell:migration-test</code>. The command&rsquo;s abridged help text says&mldr;</p><pre tabindex=0><code>╭─islandora@dgdockerx ~
╰─$ docker exec -it isle-apache-dgs bash
root@db16bc9ff4c3:/# cd /var/www/html/sites/default/
root@db16bc9ff4c3:/var/www/html/sites/default# drush -u 1 iduF MigrateObject --help
...
    MigrateObject -
      Migrates an object from its --source (or --source=None) collection to --replace.  See also --share option. [Verified 31-Aug-2018]
...
</code></pre><p>The <code>MigrateObject</code> command was executed a total of 9 times to populate the <code>migration-test</code> collection using the script shown here:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>drush -u <span style=color:#ae81ff>1</span> iduF grinnell:1000 MigrateObject --share --source<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grinnell:college-life&#34;</span> --replace<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grinnell:migration-test&#34;</span>
</span></span><span style=display:flex><span>drush -u <span style=color:#ae81ff>1</span> iduF grinnell:5593 MigrateObject --share --source<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grinnell:student-scholarship&#34;</span> --replace<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grinnell:migration-test&#34;</span>
</span></span><span style=display:flex><span>drush -u <span style=color:#ae81ff>1</span> iduF grinnell:10001 MigrateObject --share --source<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grinnell:faculty-scholarship&#34;</span> --replace<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grinnell:migration-test&#34;</span>
</span></span><span style=display:flex><span>drush -u <span style=color:#ae81ff>1</span> iduF grinnell:13273 MigrateObject --share --source<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grinnell:student-scholarship&#34;</span> --replace<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grinnell:migration-test&#34;</span>
</span></span><span style=display:flex><span>drush -u <span style=color:#ae81ff>1</span> iduF grinnell:16394 MigrateObject --share --source<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grinnell:postcards&#34;</span> --replace<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grinnell:migration-test&#34;</span>
</span></span><span style=display:flex><span>drush -u <span style=color:#ae81ff>1</span> iduF grinnell:17289 MigrateObject --share --source<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grinnell:archives-suppressed&#34;</span> --replace<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grinnell:migration-test&#34;</span>
</span></span><span style=display:flex><span>drush -u <span style=color:#ae81ff>1</span> iduF grinnell:19423 MigrateObject --share --source<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grinnell:alumni-oral-histories&#34;</span> --replace<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grinnell:migration-test&#34;</span>
</span></span><span style=display:flex><span>drush -u <span style=color:#ae81ff>1</span> iduF grinnell:23345 MigrateObject --share --source<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grinnell:faculty-scholarship&#34;</span> --replace<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grinnell:migration-test&#34;</span>
</span></span><span style=display:flex><span>drush -u <span style=color:#ae81ff>1</span> iduF grinnell:23517 MigrateObject --share --source<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grinnell:college-life&#34;</span> --replace<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grinnell:migration-test&#34;</span>
</span></span></code></pre></div><p>The following is a simple list of the objects, not including pages and children, and their corresponding <code>CModel</code>.</p><table><thead><tr><th>PID</th><th>CModel</th><th>Details</th></tr></thead><tbody><tr><td>grinnell:1000</td><td>islandora:bookCModel</td><td>A 14-page book</td></tr><tr><td>grinnell:5593</td><td>islandora:sp-audioCModel</td><td>A very large audio recording</td></tr><tr><td>grinnell:10001</td><td>islandora:compoundCModel</td><td>A compound parent object with 8 children including some binary CModel objects</td></tr><tr><td>grinnell:13273</td><td>islandora:sp_videoCModel</td><td>A short video</td></tr><tr><td>grinnell:16394</td><td>islandora:sp_basic_image</td><td>A JPG basic image</td></tr><tr><td>grinnell:17289</td><td>islandora:sp_web_archive</td><td>A WARC (web-archive) of a small website</td></tr><tr><td>grinnell:19423</td><td>islandora:oralhistoriesCModel</td><td>An alumni oral history</td></tr><tr><td>grinnell:23345</td><td>islandora:sp_pdf</td><td>A multi-page PDF</td></tr><tr><td>grinnell:23517</td><td>islandora:sp_large_image_cmodel</td><td>A TIFF large image</td></tr></tbody></table><h2 id=dealing-with-the-children>Dealing with the Children</h2><p>Under normal circumstances all of the child objects belonging to a compound or book would be part of the parent&rsquo;s collection(s) so subsequent operations that identify objects by-collection would work on both the parent and it&rsquo;s children. However, our child objects are not yet part of the new <code>migration-test</code> collection, so let&rsquo;s remedy that now.</p><p>The <code>drush</code> commands I used to migrate the child objects were:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>drush -u <span style=color:#ae81ff>1</span> iduF grinnell:1001-1014 MigrateObject --share --source<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grinnell:college-buildings&#34;</span> --replace<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grinnell:migration-test&#34;</span>
</span></span><span style=display:flex><span>drush -u <span style=color:#ae81ff>1</span> iduF grinnell:10020-10027 MigrateObject --share --source<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grinnell:faculty-scholarship&#34;</span> --replace<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;grinnell:migration-test&#34;</span>
</span></span></code></pre></div><p>Note: The above examples show why it&rsquo;s always nice to keep a parent object&rsquo;s children together with consecutive PIDs!</p><h3 id=book-pages-did-not-migrate>Book Pages Did NOT Migrate</h3><p>Unfortunately, the first of the two commands shown in the previous section did NOT work, presumably because book pages belong ONLY to their parent book object, and not to any &ldquo;collection&rdquo;. So, the <code>MigrateObject</code> command won&rsquo;t work. No worries, we will deal with this wrinkle near the end of this process.</p><h2 id=the-collection>The Collection</h2><p>I subsequently visited the new collection at <a href=https://isle-stage.grinnell.edu/islandora/object/grinnell:migration-test/manage>https://isle-stage.grinnell.edu/islandora/object/grinnell:migration-test/manage</a> where I found this summary of the results to confirm:</p><link rel=stylesheet href=https://static.grinnell.edu/dlad-blog/css/hugo-easy-gallery.css><div class=box><figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject><div class=img><img itemprop=thumbnail src=https://static.grinnell.edu/dlad-blog/images/post-129/migration-test-collection.png></div><a href=https://static.grinnell.edu/dlad-blog/images/post-129/migration-test-collection.png itemprop=contentUrl></a><figcaption><h4>Figure 1 &#183; Summary of Objects in <code>grinnell:migration-test</code></h4></figcaption></figure></div><p>Note that the children of <code>grinnell:10001</code> are NOT listed in this view, but I visited <a href=https://isle-stage.grinnell.edu/islandora/object/grinnell%3Amigration-test/manage/collection>https://isle-stage.grinnell.edu/islandora/object/grinnell%3Amigration-test/manage/collection</a> to confirm that they ARE a part of the new collection.</p><h2 id=my-bag-of-tricks>My Bag of Tricks</h2><p>This is not my first rodeo, so I turned to <a href=https://static.grinnell.edu/dlad-blog/>my blog</a> in order to export the new collection. Specifically, I turned to <a href=https://static.grinnell.edu/dlad-blog/posts/115-exporting-editing-replacing-mods-datastreams-updated-technical-details/>Exporting, Editing & Replacing MODS Datastreams: Updated Technical Details</a>. Only steps 1 and 2 would be necessary. <code>Step 1a</code> and <code>1b</code> were done long ago on the staging server that I&rsquo;m using, and <code>Step 1c</code> currently isn&rsquo;t even possible (another story) so here&rsquo;s what I did starting with <code>Step 1d</code>, step-by-step.</p><h2 id=step-1d---using-drush-islandora_datastream_export>Step 1d - Using Drush islandora_datastream_export</h2><p>To execute this step I needed to copy the <code>export.sh</code> script and <code>ri-query.txt</code> from <code>DGDocker1</code>, modify them a little, and make them available inside the <code>Apache</code> container on <code>DGDockerX</code>, something like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>╭─islandora@dgdockerx ~
</span></span><span style=display:flex><span>╰─$ rsync -aruvi islandora@dgdocker1.grinnell.edu:/home/islandora/export.sh .                                                              <span style=color:#ae81ff>23</span> ↵
</span></span><span style=display:flex><span>receiving incremental file list
</span></span><span style=display:flex><span>&gt;f+++++++++ export.sh
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sent <span style=color:#ae81ff>43</span> bytes  received <span style=color:#ae81ff>894</span> bytes  624.67 bytes/sec
</span></span><span style=display:flex><span>total size is <span style=color:#ae81ff>782</span>  speedup is 0.83
</span></span><span style=display:flex><span>╭─islandora@dgdockerx ~
</span></span><span style=display:flex><span>╰─$ rsync -aruvi islandora@dgdocker1.grinnell.edu:/home/islandora/ri-query.txt .
</span></span><span style=display:flex><span>receiving incremental file list
</span></span><span style=display:flex><span>&gt;f+++++++++ ri-query.txt
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sent <span style=color:#ae81ff>43</span> bytes  received <span style=color:#ae81ff>245</span> bytes  192.00 bytes/sec
</span></span><span style=display:flex><span>total size is <span style=color:#ae81ff>130</span>  speedup is 0.45
</span></span></code></pre></div><p>Let&rsquo;s have a look at the script and the SPARQL query&mldr;</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>╭─islandora@dgdockerx ~
</span></span><span style=display:flex><span>╰─$ cat export.sh ri-query.txt
</span></span><span style=display:flex><span>Apache<span style=color:#f92672>=</span>isle-apache-dg
</span></span><span style=display:flex><span>Target<span style=color:#f92672>=</span>/utility-scripts
</span></span><span style=display:flex><span><span style=color:#75715e># wget https://gist.github.com/McFateM/5bd7e5b0fa5d2928b2799d039a4c0fab/raw/collections.list</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>while</span> read collection
</span></span><span style=display:flex><span><span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    cp -f ri-query.txt query.sparql
</span></span><span style=display:flex><span>    sed -i <span style=color:#e6db74>&#39;s|COLLECTION|&#39;</span><span style=color:#e6db74>${</span>collection<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;|g&#39;</span> query.sparql
</span></span><span style=display:flex><span>    docker cp query.sparql <span style=color:#e6db74>${</span>Apache<span style=color:#e6db74>}</span>:<span style=color:#e6db74>${</span>Target<span style=color:#e6db74>}</span>/<span style=color:#e6db74>${</span>collection<span style=color:#e6db74>}</span>.sparql
</span></span><span style=display:flex><span>    rm -f query.sparql
</span></span><span style=display:flex><span>    q<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>Target<span style=color:#e6db74>}</span>/<span style=color:#e6db74>${</span>collection<span style=color:#e6db74>}</span>.sparql
</span></span><span style=display:flex><span>    echo <span style=color:#e6db74>&#34;Processing collection &#39;</span><span style=color:#e6db74>${</span>collection<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;; Query is &#39;</span><span style=color:#e6db74>${</span>q<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;...&#34;</span>
</span></span><span style=display:flex><span>    docker exec -w <span style=color:#e6db74>${</span>Target<span style=color:#e6db74>}</span> <span style=color:#e6db74>${</span>Apache<span style=color:#e6db74>}</span> mkdir -p exported-MODS/<span style=color:#e6db74>${</span>collection<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>    docker exec -w /var/www/html/sites/default/ <span style=color:#e6db74>${</span>Apache<span style=color:#e6db74>}</span> drush -u <span style=color:#ae81ff>1</span> islandora_datastream_export --export_target<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>Target<span style=color:#e6db74>}</span>/exported-MODS/<span style=color:#e6db74>${</span>collection<span style=color:#e6db74>}</span> --query<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>q<span style=color:#e6db74>}</span> --query_type<span style=color:#f92672>=</span>islandora_datastream_exporter_ri_query  --dsid<span style=color:#f92672>=</span>MODS
</span></span><span style=display:flex><span><span style=color:#66d9ef>done</span> &lt; collections.list
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>╭─islandora@dgdockerx ~
</span></span><span style=display:flex><span>╰─$ cp ri-query.txt query.sparql
</span></span><span style=display:flex><span>╭─islandora@dgdockerx ~
</span></span><span style=display:flex><span>╰─$ cat query.sparql
</span></span><span style=display:flex><span>SELECT ?pid
</span></span><span style=display:flex><span>FROM &lt;<span style=color:#75715e>#ri&gt;</span>
</span></span><span style=display:flex><span>WHERE <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  ?pid &lt;fedora-rels-ext:isMemberOfCollection&gt; &lt;info:fedora/grinnell:COLLECTION&gt;
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>OFFSET %offset%
</span></span></code></pre></div><p>&mldr;and make some modifications to our instances to produce these&mldr;</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>╭─islandora@dgdockerx ~
</span></span><span style=display:flex><span>╰─$ cat export.sh
</span></span><span style=display:flex><span>Apache<span style=color:#f92672>=</span>isle-apache-dgs
</span></span><span style=display:flex><span>Target<span style=color:#f92672>=</span>/utility-scripts
</span></span><span style=display:flex><span>collection<span style=color:#f92672>=</span>migration-test
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span>docker cp query.sparql <span style=color:#e6db74>${</span>Apache<span style=color:#e6db74>}</span>:<span style=color:#e6db74>${</span>Target<span style=color:#e6db74>}</span>/<span style=color:#e6db74>${</span>collection<span style=color:#e6db74>}</span>.sparql
</span></span><span style=display:flex><span>q<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>Target<span style=color:#e6db74>}</span>/<span style=color:#e6db74>${</span>collection<span style=color:#e6db74>}</span>.sparql
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;Processing collection &#39;</span><span style=color:#e6db74>${</span>collection<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;; Query is &#39;</span><span style=color:#e6db74>${</span>q<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;...&#34;</span>
</span></span><span style=display:flex><span>docker exec -w <span style=color:#e6db74>${</span>Target<span style=color:#e6db74>}</span> <span style=color:#e6db74>${</span>Apache<span style=color:#e6db74>}</span> mkdir -p exported-MODS/<span style=color:#e6db74>${</span>collection<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>docker exec -w /var/www/html/sites/default/ <span style=color:#e6db74>${</span>Apache<span style=color:#e6db74>}</span> drush -u <span style=color:#ae81ff>1</span> islandora_datastream_export --export_target<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>Target<span style=color:#e6db74>}</span>/exported-MODS/<span style=color:#e6db74>${</span>collection<span style=color:#e6db74>}</span> --query<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>q<span style=color:#e6db74>}</span> --query_type<span style=color:#f92672>=</span>islandora_datastream_exporter_ri_query  --dsid<span style=color:#f92672>=</span>MODS
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>╭─islandora@dgdockerx ~
</span></span><span style=display:flex><span>╰─$ cat query.sparql
</span></span><span style=display:flex><span>SELECT ?pid
</span></span><span style=display:flex><span>FROM &lt;<span style=color:#75715e>#ri&gt;</span>
</span></span><span style=display:flex><span>WHERE <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  ?pid &lt;fedora-rels-ext:isMemberOfCollection&gt; &lt;info:fedora/grinnell:migration-test&gt;
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>OFFSET %offset%
</span></span></code></pre></div><p>Now, let&rsquo;s run the <code>export.sh</code> script&mldr;</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>╭─islandora@dgdockerx ~
</span></span><span style=display:flex><span>╰─$ source export.sh
</span></span><span style=display:flex><span>Processing collection <span style=color:#e6db74>&#39;migration-test&#39;</span>; Query is <span style=color:#e6db74>&#39;/utility-scripts/migration-test.sparql&#39;</span>...
</span></span><span style=display:flex><span>Processing results <span style=color:#ae81ff>1</span> to <span style=color:#ae81ff>10</span>                                                  <span style=color:#f92672>[</span>ok<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:1000.                       <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:19423.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:17289.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:23345.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:10001.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:10020.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:5593.                       <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:10024.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:16934.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:13273.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Processing results <span style=color:#ae81ff>11</span> to <span style=color:#ae81ff>17</span>                                                 <span style=color:#f92672>[</span>ok<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:23517.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:10021.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:10022.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:10025.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:10023.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:10026.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:10027.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span></code></pre></div><p>So, the above results should be found in our <code>Apache</code> container&rsquo;s <code>/utility-scripts/exported-MODS/migration-test/</code> directory, like so&mldr;</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>╭─islandora@dgdockerx ~
</span></span><span style=display:flex><span>╰─$ docker exec -it isle-apache-dgs bash
</span></span><span style=display:flex><span>root@db16bc9ff4c3:/# cd /utility-scripts/exported-MODS/migration-test/
</span></span><span style=display:flex><span>root@db16bc9ff4c3:/utility-scripts/exported-MODS/migration-test# ll
</span></span><span style=display:flex><span>total <span style=color:#ae81ff>80</span>
</span></span><span style=display:flex><span>drwxr-xr-x. <span style=color:#ae81ff>2</span> root root <span style=color:#ae81ff>4096</span> Oct <span style=color:#ae81ff>18</span> 14:56 ./
</span></span><span style=display:flex><span>drwxr-xr-x. <span style=color:#ae81ff>3</span> root root <span style=color:#ae81ff>4096</span> Oct <span style=color:#ae81ff>13</span> 14:41 ../
</span></span><span style=display:flex><span>-rw-r--r--. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>3339</span> Oct <span style=color:#ae81ff>18</span> 14:56 grinnell_10001_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>3003</span> Oct <span style=color:#ae81ff>18</span> 14:56 grinnell_1000_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>3482</span> Oct <span style=color:#ae81ff>18</span> 14:56 grinnell_10020_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>3475</span> Oct <span style=color:#ae81ff>18</span> 14:56 grinnell_10021_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>3503</span> Oct <span style=color:#ae81ff>18</span> 14:56 grinnell_10022_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>3496</span> Oct <span style=color:#ae81ff>18</span> 14:56 grinnell_10023_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>3482</span> Oct <span style=color:#ae81ff>18</span> 14:56 grinnell_10024_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>3483</span> Oct <span style=color:#ae81ff>18</span> 14:56 grinnell_10025_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>3488</span> Oct <span style=color:#ae81ff>18</span> 14:56 grinnell_10026_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>3526</span> Oct <span style=color:#ae81ff>18</span> 14:56 grinnell_10027_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>3696</span> Oct <span style=color:#ae81ff>18</span> 14:56 grinnell_13273_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>3099</span> Oct <span style=color:#ae81ff>18</span> 14:56 grinnell_16934_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>2168</span> Oct <span style=color:#ae81ff>18</span> 14:56 grinnell_17289_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>3425</span> Oct <span style=color:#ae81ff>18</span> 14:56 grinnell_19423_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>3580</span> Oct <span style=color:#ae81ff>18</span> 14:56 grinnell_23345_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>2047</span> Oct <span style=color:#ae81ff>18</span> 14:56 grinnell_23517_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--. <span style=color:#ae81ff>1</span> root root <span style=color:#ae81ff>5308</span> Oct <span style=color:#ae81ff>18</span> 14:56 grinnell_5593_MODS.xml
</span></span></code></pre></div><p>Note that book pages, like <code>grinnell:1001</code> through <code>grinnell:1014</code> have no MODS records so we are not really missing anything here.</p><p>Next, lets copy the MODS <code>.xml</code> files that we have back to the <code>DGDockerX</code> host.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>╭─islandora@dgdockerx ~
</span></span><span style=display:flex><span>╰─$ mkdir migration-test
</span></span><span style=display:flex><span>╭─islandora@dgdockerx ~
</span></span><span style=display:flex><span>╰─$ docker cp isle-apache-dgs:/utility-scripts/exported-MODS/migration-test/. migration-test/.
</span></span><span style=display:flex><span>╭─islandora@dgdockerx ~
</span></span><span style=display:flex><span>╰─$ ll migration-test
</span></span><span style=display:flex><span>total 80K
</span></span><span style=display:flex><span>drwxrwxr-x.  <span style=color:#ae81ff>2</span> islandora islandora 4.0K Oct <span style=color:#ae81ff>18</span> 11:45 .
</span></span><span style=display:flex><span>drwx------. <span style=color:#ae81ff>22</span> islandora islandora 4.0K Oct <span style=color:#ae81ff>18</span> 11:46 ..
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.3K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10001_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.0K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_1000_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.5K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10020_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.4K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10021_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.5K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10022_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.5K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10023_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.5K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10024_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.5K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10025_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.5K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10026_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.5K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10027_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.7K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_13273_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.1K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_16934_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 2.2K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_17289_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.4K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_19423_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.5K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_23345_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 2.0K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_23517_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 5.2K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_5593_MODS.xml
</span></span></code></pre></div><p>And since <code>/mnt/storage</code> isn&rsquo;t accessible* let&rsquo;s copy them to my Mac workstation, MA10713, which will be taking the place of iMac 8660 in the next step. So, on my Mac workstation&mldr;</p><p>*<em>Yes, I have an open ticket for ITS to remedy that&mldr;someday, maybe?</em></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>╭─mcfatem@MAC02FK0XXQ05Q ~
</span></span><span style=display:flex><span>╰─$ mkdir migration-test
</span></span><span style=display:flex><span>╭─mcfatem@MAC02FK0XXQ05Q ~
</span></span><span style=display:flex><span>╰─$ cd migration-test
</span></span><span style=display:flex><span>╭─mcfatem@MAC02FK0XXQ05Q ~/migration-test
</span></span><span style=display:flex><span>╰─$ rsync -aruvi islandora@dgdockerx.grinnell.edu:/home/islandora/migration-test/. . --progress
</span></span><span style=display:flex><span>receiving file list ...
</span></span><span style=display:flex><span><span style=color:#ae81ff>18</span> files to consider
</span></span><span style=display:flex><span>.d..t.... ./
</span></span><span style=display:flex><span>&gt;f..t.... grinnell_10001_MODS.xml
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>3339</span> 100%    3.18MB/s    0:00:00 <span style=color:#f92672>(</span>xfer#1, to-check<span style=color:#f92672>=</span>16/18<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f..t.... grinnell_1000_MODS.xml
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>3003</span> 100%    2.86MB/s    0:00:00 <span style=color:#f92672>(</span>xfer#2, to-check<span style=color:#f92672>=</span>15/18<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_10020_MODS.xml
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>3482</span> 100%    1.66MB/s    0:00:00 <span style=color:#f92672>(</span>xfer#3, to-check<span style=color:#f92672>=</span>14/18<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_10021_MODS.xml
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>3475</span> 100%    1.10MB/s    0:00:00 <span style=color:#f92672>(</span>xfer#4, to-check<span style=color:#f92672>=</span>13/18<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_10022_MODS.xml
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>3503</span> 100%  855.22kB/s    0:00:00 <span style=color:#f92672>(</span>xfer#5, to-check<span style=color:#f92672>=</span>12/18<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_10023_MODS.xml
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>3496</span> 100%  682.81kB/s    0:00:00 <span style=color:#f92672>(</span>xfer#6, to-check<span style=color:#f92672>=</span>11/18<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_10024_MODS.xml
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>3482</span> 100%  566.73kB/s    0:00:00 <span style=color:#f92672>(</span>xfer#7, to-check<span style=color:#f92672>=</span>10/18<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_10025_MODS.xml
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>3483</span> 100%  485.91kB/s    0:00:00 <span style=color:#f92672>(</span>xfer#8, to-check<span style=color:#f92672>=</span>9/18<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_10026_MODS.xml
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>3488</span> 100%  486.61kB/s    0:00:00 <span style=color:#f92672>(</span>xfer#9, to-check<span style=color:#f92672>=</span>8/18<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_10027_MODS.xml
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>3526</span> 100%  430.42kB/s    0:00:00 <span style=color:#f92672>(</span>xfer#10, to-check<span style=color:#f92672>=</span>7/18<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f..t.... grinnell_13273_MODS.xml
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>3696</span> 100%  401.04kB/s    0:00:00 <span style=color:#f92672>(</span>xfer#11, to-check<span style=color:#f92672>=</span>6/18<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f..t.... grinnell_16934_MODS.xml
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>3099</span> 100%  302.64kB/s    0:00:00 <span style=color:#f92672>(</span>xfer#12, to-check<span style=color:#f92672>=</span>5/18<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f..t.... grinnell_17289_MODS.xml
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>2168</span> 100%  176.43kB/s    0:00:00 <span style=color:#f92672>(</span>xfer#13, to-check<span style=color:#f92672>=</span>4/18<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f..t.... grinnell_19423_MODS.xml
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>3425</span> 100%  257.29kB/s    0:00:00 <span style=color:#f92672>(</span>xfer#14, to-check<span style=color:#f92672>=</span>3/18<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f..t.... grinnell_23345_MODS.xml
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>3580</span> 100%  249.72kB/s    0:00:00 <span style=color:#f92672>(</span>xfer#15, to-check<span style=color:#f92672>=</span>2/18<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f..t.... grinnell_23517_MODS.xml
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>2047</span> 100%  142.79kB/s    0:00:00 <span style=color:#f92672>(</span>xfer#16, to-check<span style=color:#f92672>=</span>1/18<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f..t.... grinnell_5593_MODS.xml
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>5308</span> 100%  323.97kB/s    0:00:00 <span style=color:#f92672>(</span>xfer#17, to-check<span style=color:#f92672>=</span>0/18<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sent <span style=color:#ae81ff>678</span> bytes  received <span style=color:#ae81ff>29316</span> bytes  19996.00 bytes/sec
</span></span><span style=display:flex><span>total size is <span style=color:#ae81ff>57600</span>  speedup is 1.92
</span></span><span style=display:flex><span>╭─mcfatem@MAC02FK0XXQ05Q ~/migration-test
</span></span><span style=display:flex><span>╰─$ ll
</span></span><span style=display:flex><span>total <span style=color:#ae81ff>144</span>
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.3K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10001_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   2.9K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_1000_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.4K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10020_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.4K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10021_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.4K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10022_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.4K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10023_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.4K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10024_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.4K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10025_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.4K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10026_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.4K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10027_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.6K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_13273_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.0K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_16934_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   2.1K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_17289_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.3K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_19423_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.5K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_23345_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   2.0K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_23517_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   5.2K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_5593_MODS.xml
</span></span></code></pre></div><h2 id=finally-step-2---map-mods-to-master-python-3-script>Finally&mldr; Step 2 - Map-MODS-to-MASTER Python 3 Script</h2><p>iMac 8660 is due to be retired/removed any day now, so I&rsquo;m moving all components of this step to my Mac workstation, MA10713. Since the project is stored in <em>GitHub</em> I was able to do this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>╭─mcfatem@MAC02FK0XXQ05Q ~/GitHub
</span></span><span style=display:flex><span>╰─$ git clone https://github.com/DigitalGrinnell/Map-MODS-to-MASTER
</span></span><span style=display:flex><span>Cloning into <span style=color:#e6db74>&#39;Map-MODS-to-MASTER&#39;</span>...
</span></span><span style=display:flex><span>remote: Enumerating objects: 597, <span style=color:#66d9ef>done</span>.
</span></span><span style=display:flex><span>remote: Counting objects: 100% <span style=color:#f92672>(</span>597/597<span style=color:#f92672>)</span>, <span style=color:#66d9ef>done</span>.
</span></span><span style=display:flex><span>remote: Compressing objects: 100% <span style=color:#f92672>(</span>528/528<span style=color:#f92672>)</span>, <span style=color:#66d9ef>done</span>.
</span></span><span style=display:flex><span>remote: Total <span style=color:#ae81ff>597</span> <span style=color:#f92672>(</span>delta 49<span style=color:#f92672>)</span>, reused <span style=color:#ae81ff>587</span> <span style=color:#f92672>(</span>delta 42<span style=color:#f92672>)</span>, pack-reused <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>Receiving objects: 100% <span style=color:#f92672>(</span>597/597<span style=color:#f92672>)</span>, 5.07 MiB | 8.50 MiB/s, <span style=color:#66d9ef>done</span>.
</span></span><span style=display:flex><span>Resolving deltas: 100% <span style=color:#f92672>(</span>49/49<span style=color:#f92672>)</span>, <span style=color:#66d9ef>done</span>.
</span></span><span style=display:flex><span>╭─mcfatem@MAC02FK0XXQ05Q ~/GitHub
</span></span><span style=display:flex><span>╰─$ ll
</span></span><span style=display:flex><span>total <span style=color:#ae81ff>32</span>
</span></span><span style=display:flex><span>drwxr-xr-x  <span style=color:#ae81ff>21</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   672B Oct <span style=color:#ae81ff>12</span>  <span style=color:#ae81ff>2021</span> Digital-Grinnell.github.io
</span></span><span style=display:flex><span>drwxr-xr-x  <span style=color:#ae81ff>12</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   384B Oct <span style=color:#ae81ff>13</span> 10:20 Map-MODS-to-MASTER
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><h3 id=houston-we-have-a-problem>Houston, We Have a Problem</h3><p>So, the <code>main.py</code> script in the <code>Map-MODS-to-MASTER</code> project does a lot of heavy lifting, and it&rsquo;s got lots of problems as a result. Namely:</p><ol><li>It&rsquo;s very tightly tied to a couple of <code>//storage</code> directories that I currently can&rsquo;t access,</li><li>It&rsquo;s meant to process a list of collections with very specific locations, not a single list of .xml documents, and</li><li>It was written using <em>PyCharm</em> which I hardly use anymore because it promotes bad Python habits.</li></ol><h3 id=houston-we-have-a-solution>Houston, We Have a Solution</h3><p>Fortunately, the <code>process_collection</code> function inside <code>main.py</code> has all that we need. So, I&rsquo;m going to make a local copy of the project on MA10713 at <code>~/GitHub/migrate-MODS-xml</code> and keep just the parts of <code>process_collection</code> that I need. It&rsquo;s also worth noting that I plan to do this using <em>VSCode</em> instead of <em>PyCharm</em> and I&rsquo;ll follow <a href=https://blog.summittdweller.com/posts/2022/09/proper-python/>Proper Python</a> guidance too.</p><h2 id=migrate-mods-xml>migrate-MODS-xml</h2><p>See the new project&rsquo;s <a href=https://github.com/Digital-Grinnell/migrate-MODS-xml/blob/main/README.md>README.md</a> file for details.</p><h2 id=running-the-script>Running the Script</h2><p>After some necessary modifications the script was easy to run. From start to finish the process involved the command line sequence listed below.</p><ul><li>Copied the MODS <code>.xml</code> directory and files from <code>~/migration-test</code> to the new project like so:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>╭─mcfatem@MAC02FK0XXQ05Q ~
</span></span><span style=display:flex><span>╰─$ cp -fr migration-test ~/GitHub/migrate-MODS-xml/.
</span></span></code></pre></div><ul><li>Changed working directory to the project and activated the Python virtual environment there:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>╭─mcfatem@MAC02FK0XXQ05Q ~
</span></span><span style=display:flex><span>╰─$ cd ~/GitHub/migrate-MODS-xml
</span></span><span style=display:flex><span>╭─mcfatem@MAC02FK0XXQ05Q ~/GitHub/migrate-MODS-xml
</span></span><span style=display:flex><span>╰─$ source .venv/bin/activate
</span></span></code></pre></div><ul><li>Changed the working directory to the new copy of the <code>migration-test</code> directory and ran the script there:</li></ul><pre tabindex=0><code>(.venv) ╭─mcfatem@MAC02FK0XXQ05Q ~/GitHub/migrate-MODS-xml/migration-test
╰─$ python3 ../main.py
</code></pre><h2 id=outcomes>Outcomes</h2><p>After the first run of the script the <code>migration-test</code> directory looked like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#f92672>(</span>.venv<span style=color:#f92672>)</span> ╭─mcfatem@MAC02FK0XXQ05Q ~/GitHub/migrate-MODS-xml/migration-test ‹main› 
</span></span><span style=display:flex><span>╰─$ ll
</span></span><span style=display:flex><span>total <span style=color:#ae81ff>552</span>
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users    30K Oct <span style=color:#ae81ff>18</span> 11:55 collection.log
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.6K Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_10001_MODS.log
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   270B Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_10001_MODS.remainder
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.3K Oct <span style=color:#ae81ff>18</span> 11:54 grinnell_10001_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.3K Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_1000_MODS.log
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   125B Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_1000_MODS.remainder
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   2.9K Oct <span style=color:#ae81ff>18</span> 11:54 grinnell_1000_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.3K Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_10020_MODS.log
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   180B Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_10020_MODS.remainder
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.4K Oct <span style=color:#ae81ff>18</span> 11:54 grinnell_10020_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.3K Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_10021_MODS.log
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   180B Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_10021_MODS.remainder
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.4K Oct <span style=color:#ae81ff>18</span> 11:54 grinnell_10021_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.4K Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_10022_MODS.log
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   254B Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_10022_MODS.remainder
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.4K Oct <span style=color:#ae81ff>18</span> 11:54 grinnell_10022_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.4K Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_10023_MODS.log
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   247B Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_10023_MODS.remainder
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.4K Oct <span style=color:#ae81ff>18</span> 11:54 grinnell_10023_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.4K Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_10024_MODS.log
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   247B Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_10024_MODS.remainder
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.4K Oct <span style=color:#ae81ff>18</span> 11:54 grinnell_10024_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.4K Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_10025_MODS.log
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   247B Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_10025_MODS.remainder
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.4K Oct <span style=color:#ae81ff>18</span> 11:54 grinnell_10025_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.3K Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_10026_MODS.log
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   180B Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_10026_MODS.remainder
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.4K Oct <span style=color:#ae81ff>18</span> 11:54 grinnell_10026_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.4K Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_10027_MODS.log
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   259B Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_10027_MODS.remainder
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.4K Oct <span style=color:#ae81ff>18</span> 11:54 grinnell_10027_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.0K Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_13273_MODS.log
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   225B Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_13273_MODS.remainder
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.6K Oct <span style=color:#ae81ff>18</span> 11:54 grinnell_13273_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.4K Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_16934_MODS.log
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   495B Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_16934_MODS.remainder
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.0K Oct <span style=color:#ae81ff>18</span> 11:54 grinnell_16934_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   4.2K Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_17289_MODS.log
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   970B Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_17289_MODS.remainder
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   2.1K Oct <span style=color:#ae81ff>18</span> 11:54 grinnell_17289_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.5K Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_19423_MODS.log
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   594B Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_19423_MODS.remainder
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.3K Oct <span style=color:#ae81ff>18</span> 11:54 grinnell_19423_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.2K Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_23345_MODS.log
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   190B Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_23345_MODS.remainder
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   3.5K Oct <span style=color:#ae81ff>18</span> 11:54 grinnell_23345_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   2.3K Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_23517_MODS.log
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users    37B Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_23517_MODS.remainder
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   2.0K Oct <span style=color:#ae81ff>18</span> 11:54 grinnell_23517_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   4.8K Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_5593_MODS.log
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   314B Oct <span style=color:#ae81ff>18</span> 11:55 grinnell_5593_MODS.remainder
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users   5.2K Oct <span style=color:#ae81ff>18</span> 11:54 grinnell_5593_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--  <span style=color:#ae81ff>1</span> mcfatem  GRIN<span style=color:#ae81ff>\D</span>omain Users    26K Oct <span style=color:#ae81ff>18</span> 11:55 mods.csv
</span></span></code></pre></div><p>Note that there&rsquo;s an overall <code>collection.log</code> file and the all-important <code>mods.csv</code> file which is what we came here for. Also, each object has an original <code>.xml</code> export file, a new <code>.log</code> file, and a <code>.remainder</code> file which lists those elements of the corresponding <code>.xml</code> that were NOT copied into <code>mods.csv</code>.</p><p>The <code>mods.csv</code> file was to be shared with others who will assist with future migration efforts so I&rsquo;ve copied it to a new shared folder on network storage at <code>//storage/library/all-staff/DG-migration-test</code>. I made the copy using <code>Finder</code> on MA10713 where that folder was mounted using a <code>Connect to Server...</code> specification of <code>smb://storage/library/allstaff</code>.</p><h2 id=extracting-the-obj-datastreams>Extracting the OBJ Datastreams</h2><p>This step was a piece-of-cake since I&rsquo;d already done this for all of the MODS datastreams. So, I repeated <a href=posts/129-creating-a-migration-collection/#step-1d---using-drush-islandora_datastream_export>Step 1d - Using Drush islandora_datastream_export</a> changing <code>dsid=MODS</code> to <code>dsid=OBJ</code>, and <code>exported-MODS</code> to <code>exported-OBJ</code>, in the <code>export.sh</code> script. In order to preserve <code>export.sh</code> as-is, I made a new <code>export-OBJ.sh</code> script from it on <em>DGDockerX</em>.</p><p>Having created the new script with edits specified above, I ran it producing the output you see here.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>╭─islandora@dgdockerx ~
</span></span><span style=display:flex><span>╰─$ cat export-OBJ.sh
</span></span><span style=display:flex><span>Apache<span style=color:#f92672>=</span>isle-apache-dgs
</span></span><span style=display:flex><span>Target<span style=color:#f92672>=</span>/utility-scripts
</span></span><span style=display:flex><span>collection<span style=color:#f92672>=</span>migration-test
</span></span><span style=display:flex><span><span style=color:#75715e>#</span>
</span></span><span style=display:flex><span>docker cp query.sparql <span style=color:#e6db74>${</span>Apache<span style=color:#e6db74>}</span>:<span style=color:#e6db74>${</span>Target<span style=color:#e6db74>}</span>/<span style=color:#e6db74>${</span>collection<span style=color:#e6db74>}</span>.sparql
</span></span><span style=display:flex><span>q<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>Target<span style=color:#e6db74>}</span>/<span style=color:#e6db74>${</span>collection<span style=color:#e6db74>}</span>.sparql
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;Processing collection &#39;</span><span style=color:#e6db74>${</span>collection<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;; Query is &#39;</span><span style=color:#e6db74>${</span>q<span style=color:#e6db74>}</span><span style=color:#e6db74>&#39;...&#34;</span>
</span></span><span style=display:flex><span>docker exec -w <span style=color:#e6db74>${</span>Target<span style=color:#e6db74>}</span> <span style=color:#e6db74>${</span>Apache<span style=color:#e6db74>}</span> mkdir -p exported-OBJ/<span style=color:#e6db74>${</span>collection<span style=color:#e6db74>}</span>
</span></span><span style=display:flex><span>docker exec -w /var/www/html/sites/default/ <span style=color:#e6db74>${</span>Apache<span style=color:#e6db74>}</span> drush -u <span style=color:#ae81ff>1</span> islandora_datastream_export --export_target<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>Target<span style=color:#e6db74>}</span>/exported-OBJ/<span style=color:#e6db74>${</span>collection<span style=color:#e6db74>}</span> --query<span style=color:#f92672>=</span><span style=color:#e6db74>${</span>q<span style=color:#e6db74>}</span> --query_type<span style=color:#f92672>=</span>islandora_datastream_exporter_ri_query  --dsid<span style=color:#f92672>=</span>OBJ
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>╭─islandora@dgdockerx ~
</span></span><span style=display:flex><span>╰─$ source export-OBJ.sh
</span></span><span style=display:flex><span>Processing collection <span style=color:#e6db74>&#39;migration-test&#39;</span>; Query is <span style=color:#e6db74>&#39;/utility-scripts/migration-test.sparql&#39;</span>...
</span></span><span style=display:flex><span>Processing results <span style=color:#ae81ff>1</span> to <span style=color:#ae81ff>10</span>                                                  <span style=color:#f92672>[</span>ok<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream export failed <span style=color:#66d9ef>for</span> grinnell:1000. The object does not          <span style=color:#f92672>[</span>error<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>contain the OBJ datastream.
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:19423.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:17289.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:23345.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream export failed <span style=color:#66d9ef>for</span> grinnell:10001. The object does not         <span style=color:#f92672>[</span>error<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>contain the OBJ datastream.
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:10020.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:5593.                       <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:10024.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:16934.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:13273.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Processing results <span style=color:#ae81ff>11</span> to <span style=color:#ae81ff>17</span>                                                 <span style=color:#f92672>[</span>ok<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:23517.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:10021.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:10022.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:10025.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:10023.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:10026.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:10027.                      <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span></code></pre></div><p>As you can see, two of our objects, <code>grinnell:1000</code> and <code>grinnell:10001</code> had no OBJ to export; this is because the first is a &ldquo;book&rdquo; object and the other is a compound &ldquo;parent&rdquo;. Those CModel types have no OBJ&rsquo;s of their own, they have only child objects. Also, you may recall that the pages of our book, <code>grinnell:1000</code> are not part of the <code>migration-test</code> collection, but they have valid <code>OBJ</code> datastreams. So, how can we collect the OBJs of those pages?</p><h3 id=a-new-sparql-query>A New SPARQL Query</h3><p>That&rsquo;s how&mldr; we need to modifiy our SPARQL query (currently it exists as <code>/home/islandora/query.sparql</code> on <em>DGDockerX</em>) to return children, in this case &ldquo;pages&rdquo;, of our book object rather than children of a particular collection. The RELS-EXT datastreams of the children we want look something like this:</p><pre tabindex=0><code>&lt;rdf:RDF&gt;
&lt;rdf:Description rdf:about=&#34;info:fedora/grinnell:1001&#34;&gt;
&lt;hasModel rdf:resource=&#34;info:fedora/islandora:pageCModel&#34;/&gt;
&lt;isSequenceNumber rdf:datatype=&#34;http://www.w3.org/2001/XMLSchema#int&#34;&gt;1&lt;/isSequenceNumber&gt;
&lt;isPageNumber rdf:datatype=&#34;http://www.w3.org/2001/XMLSchema#int&#34;&gt;1&lt;/isPageNumber&gt;
&lt;isPageOf rdf:resource=&#34;info:fedora/grinnell:1000&#34;/&gt;
&lt;isSection rdf:datatype=&#34;http://www.w3.org/2001/XMLSchema#int&#34;&gt;1&lt;/isSection&gt;
&lt;isMemberOf rdf:resource=&#34;info:fedora/grinnell:1000&#34;/&gt;
&lt;islandora:isManageableByUser&gt;fedoraAdmin&lt;/islandora:isManageableByUser&gt;
&lt;islandora:isManageableByUser&gt;System Admin&lt;/islandora:isManageableByUser&gt;
&lt;islandora:isManageableByRole&gt;Administrator&lt;/islandora:isManageableByRole&gt;
&lt;islandora:isManageableByRole&gt;Faulconer Admin&lt;/islandora:isManageableByRole&gt;
&lt;islandora:isManageableByRole&gt;Workflow Administrator&lt;/islandora:isManageableByRole&gt;
&lt;islandora:isManageableByRole&gt;administrator&lt;/islandora:isManageableByRole&gt;
&lt;islandora:hasLanguage&gt;eng&lt;/islandora:hasLanguage&gt;
&lt;/rdf:Description&gt;
&lt;/rdf:RDF&gt;
</code></pre><p>So I created a new SPARQL query as you see below and executed the new <code>export-OBJ.sh</code> script like so:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>╭─islandora@dgdockerx ~ 
</span></span><span style=display:flex><span>╰─$ cat export-OBJ.sh                                                                    <span style=color:#ae81ff>1</span> ↵
</span></span><span style=display:flex><span>SELECT ?pid
</span></span><span style=display:flex><span>FROM &lt;<span style=color:#75715e>#ri&gt;</span>
</span></span><span style=display:flex><span>WHERE <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  ?pid &lt;fedora-rels-ext:isMemberOf&gt; &lt;info:fedora/grinnell:1000&gt;
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>OFFSET %offset%
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>╭─islandora@dgdockerx ~ 
</span></span><span style=display:flex><span>╰─$ source export-OBJ.sh                                                                    <span style=color:#ae81ff>1</span> ↵
</span></span><span style=display:flex><span>Processing collection <span style=color:#e6db74>&#39;migration-test&#39;</span>; Query is <span style=color:#e6db74>&#39;/utility-scripts/migration-test.sparql&#39;</span>...
</span></span><span style=display:flex><span>Processing results <span style=color:#ae81ff>1</span> to <span style=color:#ae81ff>10</span>                                                  <span style=color:#f92672>[</span>ok<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:1009.                       <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:1008.                       <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:1014.                       <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:1012.                       <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:1007.                       <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:1011.                       <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:1005.                       <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:1013.                       <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:1002.                       <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:1001.                       <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Processing results <span style=color:#ae81ff>11</span> to <span style=color:#ae81ff>14</span>                                                 <span style=color:#f92672>[</span>ok<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:1003.                       <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:1010.                       <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:1006.                       <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>Datastream exported succeeded <span style=color:#66d9ef>for</span> grinnell:1004.                       <span style=color:#f92672>[</span>success<span style=color:#f92672>]</span>
</span></span></code></pre></div><p>As before, since <code>/mnt/storage</code> isn&rsquo;t accessible from <em>DGDockerX</em> I copied all of the <code>OBJ</code> datastream files from our <em>Apache</em> container to the <em>DGDockerX</em> host, then to my Mac workstation, MA10713.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>╭─islandora@dgdockerx ~
</span></span><span style=display:flex><span>╰─$ cd migration-test
</span></span><span style=display:flex><span>╭─islandora@dgdockerx ~/migration-test
</span></span><span style=display:flex><span>╰─$ docker cp isle-apache-dgs:/utility-scripts/exported-OBJ/migration-test/. .
</span></span><span style=display:flex><span>╭─islandora@dgdockerx ~/migration-test
</span></span><span style=display:flex><span>╰─$ ll
</span></span><span style=display:flex><span>total 726M
</span></span><span style=display:flex><span>drwxrwxr-x.  <span style=color:#ae81ff>2</span> islandora islandora 4.0K Oct <span style=color:#ae81ff>18</span> 12:40 .
</span></span><span style=display:flex><span>drwx------. <span style=color:#ae81ff>22</span> islandora islandora 4.0K Oct <span style=color:#ae81ff>18</span> 12:40 ..
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.3K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10001_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.0K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_1000_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora  32M Oct <span style=color:#ae81ff>18</span> 12:31 grinnell_1001_OBJ.tiff
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.5K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10020_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 217K Oct <span style=color:#ae81ff>18</span> 12:07 grinnell_10020_OBJ.pdf
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.4K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10021_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora  62K Oct <span style=color:#ae81ff>18</span> 12:07 grinnell_10021_OBJ.pdf
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.5K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10022_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora  19M Oct <span style=color:#ae81ff>18</span> 12:07 grinnell_10022_OBJ.bin
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.5K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10023_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora  25M Oct <span style=color:#ae81ff>18</span> 12:07 grinnell_10023_OBJ.bin
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.5K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10024_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora  30K Oct <span style=color:#ae81ff>18</span> 12:07 grinnell_10024_OBJ.tar
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.5K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10025_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora  11K Oct <span style=color:#ae81ff>18</span> 12:07 grinnell_10025_OBJ.bin
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.5K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10026_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 451K Oct <span style=color:#ae81ff>18</span> 12:07 grinnell_10026_OBJ.pdf
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.5K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_10027_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 485K Oct <span style=color:#ae81ff>18</span> 12:07 grinnell_10027_OBJ.ppt
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora  32M Oct <span style=color:#ae81ff>18</span> 12:31 grinnell_1002_OBJ.tiff
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora  32M Oct <span style=color:#ae81ff>18</span> 12:31 grinnell_1003_OBJ.tiff
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora  32M Oct <span style=color:#ae81ff>18</span> 12:31 grinnell_1004_OBJ.tiff
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora  32M Oct <span style=color:#ae81ff>18</span> 12:31 grinnell_1005_OBJ.tiff
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora  32M Oct <span style=color:#ae81ff>18</span> 12:31 grinnell_1006_OBJ.tiff
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora  32M Oct <span style=color:#ae81ff>18</span> 12:31 grinnell_1007_OBJ.tiff
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora  32M Oct <span style=color:#ae81ff>18</span> 12:31 grinnell_1008_OBJ.tiff
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora  32M Oct <span style=color:#ae81ff>18</span> 12:31 grinnell_1009_OBJ.tiff
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora  32M Oct <span style=color:#ae81ff>18</span> 12:31 grinnell_1010_OBJ.tiff
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora  32M Oct <span style=color:#ae81ff>18</span> 12:31 grinnell_1011_OBJ.tiff
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora  32M Oct <span style=color:#ae81ff>18</span> 12:31 grinnell_1012_OBJ.tiff
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora  32M Oct <span style=color:#ae81ff>18</span> 12:31 grinnell_1013_OBJ.tiff
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora  32M Oct <span style=color:#ae81ff>18</span> 12:31 grinnell_1014_OBJ.tiff
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.7K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_13273_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora  36M Oct <span style=color:#ae81ff>18</span> 12:07 grinnell_13273_OBJ.mp4
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.1K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_16934_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 229K Oct <span style=color:#ae81ff>18</span> 12:07 grinnell_16934_OBJ.jpg
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 2.2K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_17289_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 5.4M Oct <span style=color:#ae81ff>18</span> 12:07 grinnell_17289_OBJ.warc
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.4K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_19423_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora  16M Oct <span style=color:#ae81ff>18</span> 12:07 grinnell_19423_OBJ.mp3
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 3.5K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_23345_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 1.2M Oct <span style=color:#ae81ff>18</span> 12:07 grinnell_23345_OBJ.pdf
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 2.0K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_23517_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora  16M Oct <span style=color:#ae81ff>18</span> 12:07 grinnell_23517_OBJ.tiff
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 5.2K Oct <span style=color:#ae81ff>18</span> 09:56 grinnell_5593_MODS.xml
</span></span><span style=display:flex><span>-rw-r--r--.  <span style=color:#ae81ff>1</span> islandora islandora 163M Oct <span style=color:#ae81ff>18</span> 12:07 grinnell_5593_OBJ.mp3
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>╭─mcfatem@MAC02FK0XXQ05Q ~
</span></span><span style=display:flex><span>╰─$ cd migration-test
</span></span><span style=display:flex><span>╭─mcfatem@MAC02FK0XXQ05Q ~/migration-test
</span></span><span style=display:flex><span>╰─$ rsync -aruvi islandora@dgdockerx.grinnell.edu:/home/islandora/migration-test/. . --progress
</span></span><span style=display:flex><span>receiving file list ...
</span></span><span style=display:flex><span><span style=color:#ae81ff>47</span> files to consider
</span></span><span style=display:flex><span>.d..t.... ./
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_1001_OBJ.tiff
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>33349912</span> 100%   18.41MB/s    0:00:01 <span style=color:#f92672>(</span>xfer#1, to-check<span style=color:#f92672>=</span>43/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_10020_OBJ.pdf
</span></span><span style=display:flex><span>      <span style=color:#ae81ff>222174</span> 100%  293.60kB/s    0:00:00 <span style=color:#f92672>(</span>xfer#2, to-check<span style=color:#f92672>=</span>41/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_10021_OBJ.pdf
</span></span><span style=display:flex><span>       <span style=color:#ae81ff>62947</span> 100%   82.85kB/s    0:00:00 <span style=color:#f92672>(</span>xfer#3, to-check<span style=color:#f92672>=</span>39/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_10022_OBJ.bin
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>19144317</span> 100%   11.38MB/s    0:00:01 <span style=color:#f92672>(</span>xfer#4, to-check<span style=color:#f92672>=</span>37/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_10023_OBJ.bin
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>25843886</span> 100%   14.05MB/s    0:00:01 <span style=color:#f92672>(</span>xfer#5, to-check<span style=color:#f92672>=</span>35/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_10024_OBJ.tar
</span></span><span style=display:flex><span>       <span style=color:#ae81ff>30720</span> 100%   39.68kB/s    0:00:00 <span style=color:#f92672>(</span>xfer#6, to-check<span style=color:#f92672>=</span>33/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_10025_OBJ.bin
</span></span><span style=display:flex><span>       <span style=color:#ae81ff>11032</span> 100%   14.23kB/s    0:00:00 <span style=color:#f92672>(</span>xfer#7, to-check<span style=color:#f92672>=</span>31/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_10026_OBJ.pdf
</span></span><span style=display:flex><span>      <span style=color:#ae81ff>461189</span> 100%  579.64kB/s    0:00:00 <span style=color:#f92672>(</span>xfer#8, to-check<span style=color:#f92672>=</span>29/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_10027_OBJ.ppt
</span></span><span style=display:flex><span>      <span style=color:#ae81ff>496640</span> 100%  607.01kB/s    0:00:00 <span style=color:#f92672>(</span>xfer#9, to-check<span style=color:#f92672>=</span>27/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_1002_OBJ.tiff
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>33356688</span> 100%   13.93MB/s    0:00:02 <span style=color:#f92672>(</span>xfer#10, to-check<span style=color:#f92672>=</span>26/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_1003_OBJ.tiff
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>33349840</span> 100%   17.93MB/s    0:00:01 <span style=color:#f92672>(</span>xfer#11, to-check<span style=color:#f92672>=</span>25/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_1004_OBJ.tiff
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>33354720</span> 100%   14.07MB/s    0:00:02 <span style=color:#f92672>(</span>xfer#12, to-check<span style=color:#f92672>=</span>24/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_1005_OBJ.tiff
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>33350900</span> 100%   18.11MB/s    0:00:01 <span style=color:#f92672>(</span>xfer#13, to-check<span style=color:#f92672>=</span>23/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_1006_OBJ.tiff
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>33352664</span> 100%   14.12MB/s    0:00:02 <span style=color:#f92672>(</span>xfer#14, to-check<span style=color:#f92672>=</span>22/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_1007_OBJ.tiff
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>33353120</span> 100%   18.26MB/s    0:00:01 <span style=color:#f92672>(</span>xfer#15, to-check<span style=color:#f92672>=</span>21/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_1008_OBJ.tiff
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>33352888</span> 100%   14.27MB/s    0:00:02 <span style=color:#f92672>(</span>xfer#16, to-check<span style=color:#f92672>=</span>20/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_1009_OBJ.tiff
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>33353256</span> 100%   18.54MB/s    0:00:01 <span style=color:#f92672>(</span>xfer#17, to-check<span style=color:#f92672>=</span>19/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_1010_OBJ.tiff
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>33349940</span> 100%   14.43MB/s    0:00:02 <span style=color:#f92672>(</span>xfer#18, to-check<span style=color:#f92672>=</span>18/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_1011_OBJ.tiff
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>33351652</span> 100%   18.68MB/s    0:00:01 <span style=color:#f92672>(</span>xfer#19, to-check<span style=color:#f92672>=</span>17/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_1012_OBJ.tiff
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>33353972</span> 100%   14.54MB/s    0:00:02 <span style=color:#f92672>(</span>xfer#20, to-check<span style=color:#f92672>=</span>16/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_1013_OBJ.tiff
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>33352848</span> 100%   18.91MB/s    0:00:01 <span style=color:#f92672>(</span>xfer#21, to-check<span style=color:#f92672>=</span>15/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_1014_OBJ.tiff
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>33349120</span> 100%   14.60MB/s    0:00:02 <span style=color:#f92672>(</span>xfer#22, to-check<span style=color:#f92672>=</span>14/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_13273_OBJ.mp4
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>37367789</span> 100%   19.45MB/s    0:00:01 <span style=color:#f92672>(</span>xfer#23, to-check<span style=color:#f92672>=</span>12/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_16934_OBJ.jpg
</span></span><span style=display:flex><span>      <span style=color:#ae81ff>233941</span> 100%  271.01kB/s    0:00:00 <span style=color:#f92672>(</span>xfer#24, to-check<span style=color:#f92672>=</span>10/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_17289_OBJ.warc
</span></span><span style=display:flex><span>     <span style=color:#ae81ff>5593634</span> 100%    4.89MB/s    0:00:01 <span style=color:#f92672>(</span>xfer#25, to-check<span style=color:#f92672>=</span>8/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_19423_OBJ.mp3
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>16448993</span> 100%   19.13MB/s    0:00:00 <span style=color:#f92672>(</span>xfer#26, to-check<span style=color:#f92672>=</span>6/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_23345_OBJ.pdf
</span></span><span style=display:flex><span>     <span style=color:#ae81ff>1227513</span> 100%    1.34MB/s    0:00:00 <span style=color:#f92672>(</span>xfer#27, to-check<span style=color:#f92672>=</span>4/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_23517_OBJ.tiff
</span></span><span style=display:flex><span>    <span style=color:#ae81ff>16394056</span> 100%    9.75MB/s    0:00:01 <span style=color:#f92672>(</span>xfer#28, to-check<span style=color:#f92672>=</span>2/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>&gt;f+++++++ grinnell_5593_OBJ.mp3
</span></span><span style=display:flex><span>   <span style=color:#ae81ff>169971589</span> 100%   19.76MB/s    0:00:08 <span style=color:#f92672>(</span>xfer#29, to-check<span style=color:#f92672>=</span>0/47<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>sent <span style=color:#ae81ff>660</span> bytes  received <span style=color:#ae81ff>760629901</span> bytes  21426212.99 bytes/sec
</span></span><span style=display:flex><span>total size is <span style=color:#ae81ff>760499540</span>  speedup is 1.00
</span></span></code></pre></div><p>I subsequently used <em>Finder</em> on my Mac to copy all of these files to <code>//storage/library/all-staff/DG-migration-test</code>.</p><h2 id=azure-storage>Azure Storage</h2><p>Two weeks ago I wrote this&mldr;</p><p>&ldquo;Very soon I hope to have <em>Azure Storage Explorer</em> access to some new network, actually <em>Azure</em>, shares from my MacBook. When that happens I&rsquo;ll take steps to copy all of the above files to a new web-accessible home there, I hope.&rdquo;</p><p>Well, that hasn&rsquo;t happened yet so I&rsquo;ve taken steps to create an <em>Azure Blog Storage</em> container without the benefit of the new <em>ASE</em> capability. The process of copying our <code>migrgation-test</code> collection objects and metadata to <em>Azure</em> is documented in another of my blog posts, <a href=https://static.grinnell.edu/dlad-blog/posts/130-managing-azure>Managing Azure</a>.</p><h2 id=migration-target-jstor>Migration Target: JSTOR</h2><p>This morning I imported the <code>mods.csv</code> metadata into <em>Excel</em> where I added two new columns, <code>FILE_OBJECT</code> and <code>FILE_EXTENSION</code>. These columns, intended for use with <a href=https://www.jstor.org/>JSTOR</a>, document the name and extension of the object&rsquo;s content file.</p><p>The result, <code>mods-JSTOR.xlsx</code> is stored both in <em>Azure</em> and in <code>//storage/library/all-staff/DG-migration-test</code>.</p><hr><p>I&rsquo;m sure there will be more here soon, but for now&mldr; that&rsquo;s a wrap.</p></div><div class=post-footer><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//digital-library-applications-developer-blog.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></article></main></body></html>